"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function e(t){if(t&&t.__esModule)return t;var e={};return t&&Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e.default=t,e}Object.defineProperty(exports,"__esModule",{value:!0});var r=t(require("node-fetch")),n=require("@ethersproject/bytes"),a=require("@ethersproject/contracts"),s=require("@3rdweb/contracts"),i=require("@ethersproject/constants"),o=require("@ethersproject/units"),u=require("ethers"),c=require("ts-enum-util"),p=require("@ethersproject/providers"),d=require("json2typescript"),f=require("merkletreejs"),l=t(f),h=require("ethers/lib/utils"),v=require("eth-permit"),y=require("tslib"),m=require("@ethersproject/bignumber"),x=require("@ethersproject/address"),g=require("crypto-js");function w(t,e,r,n,a,s,i){try{var o=t[s](i),u=o.value}catch(t){return void r(t)}o.done?e(u):Promise.resolve(u).then(n,a)}function b(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(t){w(s,n,a,i,o,"next",t)}function o(t){w(s,n,a,i,o,"throw",t)}i(void 0)}))}}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function T(t,e,r){return e&&k(t.prototype,e),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function C(){return(C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function S(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,M(t,e)}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _(t,e,r){return(_=O()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var a=new(Function.bind.apply(t,n));return r&&M(a,r.prototype),a}).apply(null,arguments)}function P(t){var e="function"==typeof Map?new Map:void 0;return(P=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _(t,arguments,A(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),M(r,t)})(t)}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function E(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return R(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var F,B=(function(t){var e=function(t){var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function o(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var a=Object.create((e&&e.prototype instanceof d?e:d).prototype),s=new T(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(a,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw s;return{value:void 0,done:!0}}for(r.method=a,r.arg=s;;){var i=r.delegate;if(i){var o=w(i,r);if(o){if(o===p)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,s),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var p={};function d(){}function f(){}function l(){}var h={};o(h,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(C([])));y&&y!==e&&r.call(y,a)&&(h=y);var m=l.prototype=d.prototype=Object.create(h);function x(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(a,s){function i(){return new e((function(n,i){!function n(a,s,i,o){var u=c(t[a],t,s);if("throw"!==u.type){var p=u.arg,d=p.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,i,o)}),(function(t){n("throw",t,i,o)})):e.resolve(d).then((function(t){p.value=t,i(p)}),(function(t){return n("throw",t,i,o)}))}o(u.arg)}(a,s,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return s.next=s}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=l,o(m,"constructor",l),o(l,"constructor",f),f.displayName=o(l,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,o(t,i,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},x(g.prototype),o(g.prototype,s,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,a,s){void 0===s&&(s=Promise);var i=new g(u(e,r,n,a),s);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(m),o(m,i,"Generator"),o(m,a,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=C,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var o=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(o&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=t,i.arg=e,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(F={exports:{}}),F.exports),N=function(t){function e(){return t.call(this,"NOT_FOUND")||this}return S(e,t),e}(P(Error)),L=function(t){function e(e){return t.call(this,e?"'"+e+"' is an invalid address":"Invalid address passed")||this}return S(e,t),e}(P(Error)),I=function(t){function e(e){return t.call(this,"UPLOAD_FAILED: "+e)||this}return S(e,t),e}(P(Error)),D=function(t){function e(e,r){var n;return(n=t.call(this,"FETCH_FAILED: "+e)||this).innerError=void 0,n.innerError=r,n}return S(e,t),e}(P(Error)),U=function(t){function e(e){return t.call(this,"DUPLICATE_LEAFS"+(e?" : "+e:""))||this}return S(e,t),e}(P(Error));function j(t,e){return t&&"string"==typeof t?(e.endsWith("/")||(e+="/"),t.replace("ipfs://",e)):""}function G(t,e,r){return J.apply(this,arguments)}function J(){return(J=b(B.mark((function t(e,r,n){var a,s,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={"X-App-Name":"CONSOLE-TS-SDK-"+r,"X-Public-Address":n||""},(s=new FormData).append("file",e),t.next=5,fetch("https://upload.nftlabs.co/upload",{method:"POST",body:s,headers:a});case 5:return i=t.sent,t.prev=6,t.next=9,i.json();case 9:return t.abrupt("return",t.sent.IpfsUri);case 13:throw t.prev=13,t.t0=t.catch(6),new I("Failed to upload to IPFS: "+t.t0);case 16:case"end":return t.stop()}}),t,null,[[6,13]])})))).apply(this,arguments)}function q(t,e,r){return V.apply(this,arguments)}function V(){return(V=b(B.mark((function t(e,r,n){var a,s;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=function(){return(s=b(B.mark((function t(e){var s,i,o,u;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=Object.keys(e),t.t0=B.keys(s);case 2:if((t.t1=t.t0()).done){t.next=18;break}if(!(u=(o=e[s[i=t.t1.value]])instanceof File||o instanceof Buffer)){t.next=10;break}return t.next=9,G(e[s[i]],r,n);case 9:e[s[i]]=t.sent;case 10:if(!u||"string"==typeof e[s[i]]){t.next=12;break}throw new Error("Upload to IPFS failed");case 12:if("object"!=typeof o){t.next=16;break}return t.next=15,a(e[s[i]]);case 15:e[s[i]]=t.sent;case 16:t.next=2;break;case 18:return t.abrupt("return",e);case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)},a=function(t){return s.apply(this,arguments)},"string"!=typeof e){t.next=4;break}return t.abrupt("return",e);case 4:return t.next=6,a(e);case 6:return e=t.sent,t.next=9,G(JSON.stringify(e),r,n);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}globalThis.FormData||(globalThis.FormData=require("form-data")),globalThis.File||(globalThis.File=require("@web-std/file").File);var W=n.arrayify("0x80ac58cd"),H=n.arrayify("0xd9b67a26"),z=[{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function K(t,e,r){return Z.apply(this,arguments)}function Z(){return(Z=b(B.mark((function t(e,r,n){var s,i,o,u,c,p;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=new a.Contract(r,z,e),t.next=3,s.contractURI();case 3:return o=j(i=t.sent,n),t.next=7,fetch(o);case 7:return u=t.sent,t.prev=8,t.next=11,u.json();case 11:return p=C({},c=t.sent,{uri:i,image:j(c.image,n)}),t.abrupt("return",p);case 16:return t.prev=16,t.t0=t.catch(8),t.t1=Error,t.next=21,u.text();case 21:throw t.t2=t.sent,t.t3="Gateway did not return metadata, instead returned:\n "+t.t2,new t.t1(t.t3);case 24:case"end":return t.stop()}}),t,null,[[8,16]])})))).apply(this,arguments)}function Q(t,e){return X.apply(this,arguments)}function X(){return(X=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCode(r);case 2:return t.t0=t.sent,t.abrupt("return","0x"!==t.t0);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Y,$="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee";function tt(t,e){return et.apply(this,arguments)}function et(){return(et=b(B.mark((function t(e,r){var n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.toLowerCase()!==$&&r.toLowerCase()!==i.AddressZero){t.next=5;break}return t.abrupt("return",{name:"",symbol:"",decimals:18});case 5:if(r.toLowerCase()===i.AddressZero){t.next=14;break}return n=s.ERC20__factory.connect(r,e),t.next=9,Promise.all([n.name(),n.symbol(),n.decimals()]);case 9:return t.abrupt("return",{name:(a=t.sent)[0],symbol:a[1],decimals:a[2]});case 14:t.next=18;break;case 16:t.prev=16,t.t0=t.catch(0);case 18:return t.abrupt("return",{name:"",symbol:"",decimals:0});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}function rt(t,e,r){return nt.apply(this,arguments)}function nt(){return(nt=b(B.mark((function t(e,r,n){var a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt(e,r);case 2:return t.abrupt("return",C({},a=t.sent,{value:n.toString(),displayValue:o.formatUnits(n,a.decimals)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(t){t[t.Mainnet=1]="Mainnet",t[t.Ropsten=3]="Ropsten",t[t.Rinkeby=4]="Rinkeby",t[t.Goerli=5]="Goerli",t[t.Kovan=42]="Kovan",t[t.BSC=56]="BSC",t[t.xDai=100]="xDai",t[t.Polygon=137]="Polygon",t[t.Moonriver=1285]="Moonriver",t[t.Mumbai=80001]="Mumbai",t[t.Harmony=16666e5]="Harmony",t[t.Localhost=1337]="Localhost",t[t.Hardhat=31337]="Hardhat",t[t.Fantom=250]="Fantom",t[t.FantomTestnet=4002]="FantomTestnet",t[t.Avalanche=43114]="Avalanche",t[t.AvalancheFujiTestnet=43113]="AvalancheFujiTestnet"}(Y||(Y={}));var at,st,it=[Y.Mainnet,Y.Rinkeby,Y.Polygon,Y.Mumbai,Y.Fantom,Y.FantomTestnet,Y.Avalanche,Y.AvalancheFujiTestnet],ot=((at={})[Y.Polygon]={vrfCoordinator:"0x3d2341ADb2D31f1c5530cDC622016af293177AE0",linkTokenAddress:"0xb0897686c545045aFc77CF20eC7A532E3120E0F1",keyHash:"0xf86195cf7690c55907b2b611ebb7343a6f649bff128701cc542f0569e2c549da",fees:u.ethers.utils.parseEther("0.0001")},at[Y.Mumbai]={vrfCoordinator:"0x8C7382F9D8f56b33781fE506E897a4F1e2d17255",linkTokenAddress:"0x326C977E6efc84E512bB9C30f76E30c160eD06FB",keyHash:"0x6e75b569a01ef56d18cab6a8e71e6600d6ce853834d4a5748b720d06f878b3a4",fees:u.ethers.utils.parseEther("0.0001")},at[Y.Rinkeby]={vrfCoordinator:"0xb3dCcb4Cf7a26f6cf6B120Cf5A73875B7BBc655B",linkTokenAddress:"0x01be23585060835e02b77ef475b0cc51aa1e0709",keyHash:"0x2ed0feb3e7fd2022120aa84fab1945545a9f2ffc9076fd6156fa96eaff4c1311",fees:u.ethers.utils.parseEther("0.1")},at[Y.Mainnet]={vrfCoordinator:"0xf0d54349aDdcf704F77AE15b96510dEA15cb7952",linkTokenAddress:"0x514910771AF9Ca656af840dff83E8264EcF986CA",keyHash:"0xAA77729D3466CA35AE8D28B3BBAC7CC36A5031EFDC430821C02BC31A238AF445",fees:u.ethers.utils.parseEther("2")},at[Y.Hardhat]={vrfCoordinator:"0x8C7382F9D8f56b33781fE506E897a4F1e2d17255",linkTokenAddress:"0x326C977E6efc84E512bB9C30f76E30c160eD06FB",keyHash:"0x6e75b569a01ef56d18cab6a8e71e6600d6ce853834d4a5748b720d06f878b3a4",fees:u.ethers.utils.parseEther("0.0001")},at);(st=exports.ModuleType||(exports.ModuleType={}))[st.CURRENCY=0]="CURRENCY",st[st.TOKEN=0]="TOKEN",st[st.COLLECTION=1]="COLLECTION",st[st.BUNDLE=1]="BUNDLE",st[st.NFT=2]="NFT",st[st.DYNAMIC_NFT=3]="DYNAMIC_NFT",st[st.ACCESS_NFT=4]="ACCESS_NFT",st[st.PACK=5]="PACK",st[st.MARKET=6]="MARKET",st[st.DROP=7]="DROP",st[st.DATASTORE=8]="DATASTORE",st[st.SPLITS=9]="SPLITS",st[st.VOTE=10]="VOTE",st[st.BUNDLE_DROP=11]="BUNDLE_DROP";var ut=[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}];function ct(t,e,r,n){return pt.apply(this,arguments)}function pt(){return(pt=b(B.mark((function t(e,r,n,s){var i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new a.Contract(r,ut,e),t.abrupt("return",dt(i,n,s));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function dt(t,e,r){return ft.apply(this,arguments)}function ft(){return(ft=b(B.mark((function t(e,r,n){var a,s,i,o,u;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lt(e,r);case 2:if(a=t.sent){t.next=5;break}throw new N;case 5:return s=j(a,n),t.prev=6,t.next=9,fetch(s);case 9:return i=t.sent,t.next=12,i.json();case 12:return u=C({},o=t.sent,{id:r,uri:a,image:j(o.image,n)}),t.abrupt("return",u);case 17:return t.prev=17,t.t0=t.catch(6),console.error("failed to fetch nft",t.t0),t.abrupt("return",{id:r,uri:a});case 21:case"end":return t.stop()}}),t,null,[[6,17]])})))).apply(this,arguments)}function lt(t,e){return ht.apply(this,arguments)}function ht(){return(ht=b(B.mark((function t(e,r){var n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",t.prev=1,t.next=4,e.tokenURI(r);case 4:n=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:if(n){t.next=18;break}return t.prev=10,t.next=13,e.uri(r);case 13:n=t.sent,t.next=18;break;case 16:t.prev=16,t.t1=t.catch(10);case 18:return t.abrupt("return",n);case 19:case"end":return t.stop()}}),t,null,[[1,7],[10,16]])})))).apply(this,arguments)}var vt,yt,mt={admin:"admin",minter:"minter",pauser:"pauser",transfer:"transfer",editor:"editor",lister:"lister"},xt={admin:"",transfer:"TRANSFER_ROLE",minter:"MINTER_ROLE",pauser:"PAUSER_ROLE",editor:"EDITOR_ROLE",lister:"LISTER_ROLE"};function gt(t){return"admin"===t?u.ethers.utils.hexZeroPad([0],32):u.ethers.utils.id(xt[t])}function wt(t){return t&&t===Y.Polygon?"https://gasstation-mainnet.matic.network":null}function bt(t,e,r){return kt.apply(this,arguments)}function kt(){return(kt=b(B.mark((function t(e,r,n){var a,s;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=wt(e)){t.next=3;break}return t.abrupt("return",null);case 3:return t.prev=3,t.next=6,fetch(a);case 6:return t.next=8,t.sent.json();case 8:if(!((s=t.sent[r])>0)){t.next=12;break}return t.abrupt("return",Math.min(s,n));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),console.error("failed to fetch gas",t.t0);case 17:return t.abrupt("return",null);case 18:case"end":return t.stop()}}),t,null,[[3,14]])})))).apply(this,arguments)}var Tt,Ct=((vt={})[Y.Mainnet]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E"},vt[Y.Rinkeby]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E"},vt[Y.Polygon]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E"},vt[Y.Mumbai]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E"},vt[Y.Avalanche]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E"},vt[Y.AvalancheFujiTestnet]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E"},vt[Y.Fantom]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E"},vt[Y.FantomTestnet]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E"},vt[Y.Hardhat]={registry:"0x902a29f2cfe9f8580ad672AaAD7E917d85ca9a2E"},vt),St=((yt={})[Y.Mainnet]={name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",name:"Wrapped Ether",symbol:"WETH"}},yt[Y.Rinkeby]={name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0xc778417E063141139Fce010982780140Aa0cD5Ab",name:"Wrapped Ether",symbol:"WETH"}},yt[Y.Polygon]={name:"Matic",symbol:"MATIC",decimals:18,wrapped:{address:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",name:"Wrapped Matic",symbol:"WMATIC"}},yt[Y.Mumbai]={name:"Matic",symbol:"MATIC",decimals:18,wrapped:{address:"0xd0A1E359811322d97991E03f863a0C30C2cF029C",name:"Wrapped Matic",symbol:"WMATIC"}},yt[Y.Avalanche]={name:"Avalanche",symbol:"AVAX",decimals:18,wrapped:{address:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",name:"Wrapped AVAX",symbol:"WAVAX"}},yt[Y.AvalancheFujiTestnet]={name:"Avalanche",symbol:"AVAX",decimals:18,wrapped:{address:"0xd00ae08403B9bbb9124bB305C09058E32C39A48c",name:"Wrapped AVAX",symbol:"WAVAX"}},yt[Y.Fantom]={name:"Fantom",symbol:"FTM",decimals:18,wrapped:{address:"0x21be370D5312f44cB42ce377BC9b8a0cEF1A4C83",name:"Wrapped Fantom",symbol:"WFTM"}},yt[Y.FantomTestnet]={name:"Fantom",symbol:"FTM",decimals:18,wrapped:{address:"0xf1277d1Ed8AD466beddF92ef448A132661956621",name:"Wrapped Fantom",symbol:"WFTM"}},yt[Y.Hardhat]={name:"Ether",symbol:"ETH",decimals:18,wrapped:{address:"0xc778417E063141139Fce010982780140Aa0cD5Ab",name:"Wrapped Ether",symbol:"WETH"}},yt);function At(t){return Ct[t].registry}function Mt(t){return St[t]}function Ot(t,e){if(!t)throw new Error(e)}var _t=((Tt={})[Y.Mainnet]={secondsBetweenBlocks:15,synced:!1},Tt[Y.Rinkeby]={secondsBetweenBlocks:15,synced:!1},Tt[Y.Polygon]={secondsBetweenBlocks:2.5,synced:!1},Tt[Y.Mumbai]={secondsBetweenBlocks:2.5,synced:!1},Tt[Y.Fantom]={secondsBetweenBlocks:1,synced:!1},Tt[Y.FantomTestnet]={secondsBetweenBlocks:1,synced:!1},Tt[Y.Avalanche]={secondsBetweenBlocks:1,synced:!1},Tt[Y.AvalancheFujiTestnet]={secondsBetweenBlocks:1,synced:!1},Tt[Y.Hardhat]={secondsBetweenBlocks:1,synced:!1},Tt);function Pt(){return(Pt=b(B.mark((function t(e,r){var n,a,s,i,o,u;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Math.floor(e-Date.now()/1e3),t.next=3,r.getNetwork();case 3:if(it.includes(a=t.sent.chainId)||Ot(!1),e>=Date.now()/1e3||Ot(!1),s=function(){var t=b(B.mark((function t(){var e,n,a,s,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,r.getBlock("latest");case 3:n=t.sent,a=0;case 5:if(!(a<5)){t.next=17;break}return t.next=8,r.getBlock(n.number-a);case 8:return s=t.sent,t.next=11,r.getBlock(n.number-a-1);case 11:e.push(s.timestamp-t.sent.timestamp);case 14:a++,t.next=5;break;case 17:return i=e.reduce((function(t,e){return t+e}),0),t.abrupt("return",i/e.length);case 19:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),!_t[a].synced){t.next=9;break}return t.abrupt("return",_t[a].secondsBetweenBlocks);case 9:return t.next=11,r.getBlock("latest");case 11:return i=t.sent,t.prev=12,t.next=15,s();case 15:_t[a]={synced:!0,secondsBetweenBlocks:o=t.sent},t.next=22;break;case 19:t.prev=19,t.t0=t.catch(12),o=_t[a].secondsBetweenBlocks;case 22:return console.log("Seconds until block",n),u=Math.ceil(n/o),t.abrupt("return",i.number+u);case 25:case"end":return t.stop()}}),t,null,[[12,19]])})))).apply(this,arguments)}var Rt=[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"gas",type:"uint256"},{name:"nonce",type:"uint256"},{name:"data",type:"bytes"}],Et={},Ft={};function Bt(t,e){return Nt.apply(this,arguments)}function Nt(){return(Nt=b(B.mark((function t(e,r){var n,a,s;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Ft[r],a=Date.now()-n>=2e3,r in Et&&!a){t.next=7;break}return t.next=5,e.getNonce(r);case 5:Et[r]=t.sent,Ft[r]=Date.now();case 7:return s=Et[r],Et[r]=u.BigNumber.from(Et[r]).add(1),t.abrupt("return",s);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Lt=function(){function t(t,e,r,n){this.address=void 0,this.ipfsGatewayUrl=void 0,this.options=void 0,this.sdk=void 0,this._providerOrSigner=null,this._signer=null,this.contract=void 0,this.readOnlyContract=void 0,this.address=e,this.options=r,this.ipfsGatewayUrl=r.ipfsGatewayUrl,this.setProviderOrSigner(t),this.contract=this.connectContract(),this.readOnlyContract=this.options.readOnlyRpcUrl?this.contract.connect(u.ethers.getDefaultProvider(this.options.readOnlyRpcUrl)):this.contract,this.sdk=n}var e=t.prototype;return e.exists=function(){var t=b(B.mark((function t(){var e;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getProvider();case 2:return(e=t.sent)||Ot(!1),t.abrupt("return",Q(e,this.address));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getMetadata=function(){var t=b(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.exists();case 2:if(t.sent){t.next=6;break}Ot(!1),t.next=7;break;case 6:case 7:return e=this.connectContract(),r=this.getModuleType(),t.t0=K,t.next=12,this.getProvider();case 12:return t.t1=t.sent,t.t2=e.address,t.t3=this.options.ipfsGatewayUrl,t.next=17,(0,t.t0)(t.t1,t.t2,t.t3);case 17:return t.t4=t.sent,t.t5=e.address,t.t6=r,t.abrupt("return",{metadata:t.t4,address:t.t5,type:t.t6});case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.setMetadata=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.exists();case 2:if(t.sent){t.next=6;break}Ot(!1),t.next=7;break;case 6:case 7:return t.next=9,q(e);case 9:return r=t.sent,t.next=12,this.sendTransaction("setContractURI",[r]);case 12:return t.abrupt("return",this.getMetadata());case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.setProviderOrSigner=function(t){this.providerOrSigner=t,u.Signer.isSigner(t)&&(this.signer=t),this.contract=this.connectContract(),this.readOnlyContract=this.options.readOnlyRpcUrl?this.contract.connect(u.ethers.getDefaultProvider(this.options.readOnlyRpcUrl)):this.contract},e.clearSigner=function(){this.signer=null},e.getProviderOrSigner=function(){return this.signer||this.providerOrSigner},e.getSigner=function(){return u.Signer.isSigner(this.signer)?this.signer:null},e.hasValidSigner=function(){return u.Signer.isSigner(this.signer)},e.getSignerAddress=function(){var t=b(B.mark((function t(){var e;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.getSigner())||Ot(!1),t.next=4,e.getAddress();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getProvider=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readOnlyContract.provider);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getChainID=function(){var t=b(B.mark((function t(){var e;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getProvider();case 2:return(e=t.sent)||Ot(!1),t.next=6,e.getNetwork();case 6:return t.abrupt("return",t.sent.chainId);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.connectContract=function(){throw new Error("connectContract has to be implemented")},e.getModuleType=function(){throw new Error("getModuleType has to be implemented")},e.getCallOverrides=function(){var t=b(B.mark((function t(){var e,r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getChainID();case 2:return e=t.sent,r=this.options.gasSpeed,n=this.options.maxGasPriceInGwei,t.next=7,bt(e,r,n);case 7:if(a=t.sent){t.next=10;break}return t.abrupt("return",{});case 10:return t.abrupt("return",{gasPrice:u.ethers.utils.parseUnits(a.toString(),"gwei")});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.sendTransaction=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.sendContractTransaction(this.contract,e,r,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.sendContractTransaction=function(){var t=b(B.mark((function t(e,r,n,a){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.next=3,this.getCallOverrides();case 3:a=t.sent;case 4:if(!this.options.transactionRelayerUrl){t.next=10;break}return t.next=7,this.sendGaslessTransaction(e,r,n,a);case 7:return t.abrupt("return",t.sent);case 10:return t.next=12,this.sendAndWaitForTransaction(e,r,n,a);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),e.sendAndWaitForTransaction=function(){var t=b(B.mark((function t(e,r,n,a){var s,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(s=e.functions)[r].apply(s,n.concat([a]));case 2:if(!(i=t.sent).wait){t.next=7;break}return t.next=6,i.wait();case 6:return t.abrupt("return",t.sent);case 7:return t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),e.sendGaslessTransaction=function(){var t=b(B.mark((function t(e,r,n,a){var i,o,c,p,d,f,l,h,y,m,x,g,w,b,k,T,S,A,M,O,_,P,R,E;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=this.getSigner())||Ot(!1),t.next=4,this.getProvider();case 4:return(c=t.sent)||Ot(!1),t.next=8,this.getChainID();case 8:return p=t.sent,t.next=11,this.getSignerAddress();case 11:return d=t.sent,f=this.address,l=(null==a?void 0:a.value)||0,h=e.interface.encodeFunctionData(r,n),m=s.Forwarder__factory.connect(y=this.options.transactionRelayerForwarderAddress,c),t.next=19,(i=e.estimateGas)[r].apply(i,n);case 19:return g=(x=t.sent).mul(2),x.lt(25e3)&&(g=u.BigNumber.from(5e5)),t.next=24,Bt(m,d);case 24:if(w=t.sent,b={name:"GSNv2 Forwarder",version:"0.0.1",chainId:p,verifyingContract:y},k={ForwardRequest:Rt},T={from:d,to:f,value:u.BigNumber.from(l).toString(),gas:u.BigNumber.from(g).toString(),nonce:u.BigNumber.from(w).toString(),data:h},"approve"!==r||2!==n.length||!e.interface.functions["approve(address,uint256)"]||!e.interface.functions["permit(address,address,uint256,uint256,uint8,bytes32,bytes32)"]){t.next=38;break}return A=n[0],M=n[1],t.next=33,v.signERC2612Permit(o,e.address,d,A,M);case 33:T=C({to:e.address},O=t.sent),S=""+O.r+O.s.substring(2)+O.v.toString(16),t.next=48;break;case 38:if(null==o||null==(_=o.provider)||null==(P=_.provider)||!P.isWalletConnect){t.next=45;break}return R=u.ethers.utils._TypedDataEncoder.getPayload(b,k,T),t.next=42,null==o?void 0:o.provider.send("eth_signTypedData",[d.toLowerCase(),JSON.stringify(R)]);case 42:S=t.sent,t.next=48;break;case 45:return t.next=47,o._signTypedData(b,k,T);case 47:S=t.sent;case 48:return t.next=50,this.options.transactionRelayerSendFunction(T,S);case 50:return E=t.sent,t.next=53,c.waitForTransaction(E);case 53:return t.abrupt("return",t.sent);case 54:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),e.parseEventLogs=function(t,e){if(!e)return null;for(var r,n=this.contract,a=E(e);!(r=a()).done;){var s=r.value;try{return n.interface.decodeEventLog(t,s.data,s.topics)}catch(t){}}return null},T(t,[{key:"providerOrSigner",get:function(){return this.signer||this._providerOrSigner||this.getProviderOrSigner()},set:function(t){this._providerOrSigner=t}},{key:"signer",get:function(){return this._signer},set:function(t){this._signer=t}}]),t}(),It=function(t){S(r,t);var e=r.prototype;function r(e,r,n,a){return t.call(this,e,r,n,a)||this}return e.getModuleRoles=function(){throw new Error("getModuleRoles has to be implemented by a subclass")},e.getRoleMembers=function(){var t=b(B.mark((function t(e){var r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.roles.includes(e)||Ot(!1),r=this.contract,n=gt(e),t.next=5,r.getRoleMemberCount(n);case 5:return a=t.sent.toNumber(),t.next=8,Promise.all(Array.from(Array(a).keys()).map((function(t){return r.getRoleMember(n,t)})));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getAllRoleMembers=function(){var t=b(B.mark((function t(){var e,r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.roles.length||Ot(!1),e={},r=E(this.roles);case 3:if((n=r()).done){t.next=10;break}return a=n.value,t.next=7,this.getRoleMembers(a);case 7:e[a]=t.sent;case 8:t.next=3;break;case 10:return t.abrupt("return",e);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.setAllRoleMembers=function(){var t=b(B.mark((function t(e){var r,n,a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=Object.keys(e)).length||Ot(!1),r.every((function(t){return s.roles.includes(t)}))||Ot(!1),t.next=5,this.getAllRoleMembers();case 5:return n=t.sent,a=[],r.sort((function(t){return"admin"===t?1:-1})).forEach(function(){var t=b(B.mark((function t(r){var i,o,u,c;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n[r]||[],u=(i=e[r]||[]).filter((function(t){return!o.includes(t)})),c=o.filter((function(t){return!i.includes(t)})),u.length&&u.forEach((function(t){a.push(s.contract.interface.encodeFunctionData("grantRole",[gt(r),t]))})),c.length&&c.forEach(function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.getRevokeRoleFunctionName(e);case 2:a.push(s.contract.interface.encodeFunctionData(t.sent,[gt(r),e]));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=10,this.sendTransaction("multicall",[a]);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.revokeAllRolesFromAddress=function(){var t=b(B.mark((function t(e){var r,n,a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAllRoleMembers();case 2:return r=t.sent,n=[],a=[],Object.keys(r).sort((function(t){return"admin"===t?1:-1})).forEach(function(){var t=b(B.mark((function t(i){var o;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==(o=r[i])||!o.includes(e)){t.next=6;break}return t.next=3,s.getRevokeRoleFunctionName(e);case 3:n.push(s.contract.interface.encodeFunctionData(t.sent,[gt(i),e])),a.push(i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=8,this.sendTransaction("multicall",[n]);case 8:return t.abrupt("return",a);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.grantRole=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.roles.includes(e)||Ot(!1),t.next=3,this.sendTransaction("grantRole",[gt(e),r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.revokeRole=function(){var t=b(B.mark((function t(e,r){var n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.roles.includes(e)||Ot(!1),t.next=3,this.getRevokeRoleFunctionName(r);case 3:return n=t.sent,t.next=6,this.sendTransaction(n,[gt(e),r]);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getRevokeRoleFunctionName=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSignerAddress();case 2:if(t.sent.toLowerCase()!==e.toLowerCase()){t.next=5;break}return t.abrupt("return","renounceRole");case 5:return t.abrupt("return","revokeRole");case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.prepareMetadata=function(){var t=b(B.mark((function t(e){var r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=2;break}return t.abrupt("return",e);case 2:return r=function(){var t=b(B.mark((function t(e){var a,s,i,o;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object.keys(e),t.t0=B.keys(a);case 2:if((t.t1=t.t0()).done){t.next=18;break}if(!(o=(i=e[a[s=t.t1.value]])instanceof File||i instanceof Buffer)){t.next=10;break}return t.next=9,n.sdk.getStorage().upload(e[a[s]]);case 9:e[a[s]]=t.sent;case 10:if(!o||"string"==typeof e[a[s]]){t.next=12;break}throw new Error("Upload to IPFS failed");case 12:if("object"!=typeof i){t.next=16;break}return t.next=15,r(e[a[s]]);case 15:e[a[s]]=t.sent;case 16:t.next=2;break;case 18:return t.abrupt("return",e);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=5,r(e);case 5:return e=t.sent,t.abrupt("return",JSON.stringify(e));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.prepareBatchMetadata=function(){var t=b(B.mark((function t(e){var r=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map(function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.prepareMetadata(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T(r,[{key:"roles",get:function(){return this.getModuleRoles()}}]),r}(Lt),Dt=function(){this.name="",this.description=void 0,this.image=void 0,this.externalLink=void 0};y.__decorate([d.JsonProperty("name",String)],Dt.prototype,"name",void 0),y.__decorate([d.JsonProperty("description",String,d.PropertyConvertingMode.IGNORE_NULLABLE)],Dt.prototype,"description",void 0),y.__decorate([d.JsonProperty("image",String,d.PropertyConvertingMode.IGNORE_NULLABLE)],Dt.prototype,"image",void 0),y.__decorate([d.JsonProperty("external_link",String,d.PropertyConvertingMode.IGNORE_NULLABLE)],Dt.prototype,"externalLink",void 0);var Ut=Dt=y.__decorate([d.JsonObject("CommonModuleMetadata")],Dt),jt=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).sellerFeeBasisPoints=0,e.feeRecipient=void 0,e}return S(e,t),e}(Ut);y.__decorate([d.JsonProperty("seller_fee_basis_points",Number,d.PropertyConvertingMode.IGNORE_NULLABLE)],jt.prototype,"sellerFeeBasisPoints",void 0),y.__decorate([d.JsonProperty("fee_recipient",String,d.PropertyConvertingMode.IGNORE_NULLABLE)],jt.prototype,"feeRecipient",void 0);var Gt=jt=y.__decorate([d.JsonObject("CollectionModuleMetadata")],jt),Jt=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).symbol="",e}return S(e,t),e}(Ut);y.__decorate([d.JsonProperty("symbol",String)],Jt.prototype,"symbol",void 0);var qt=Jt=y.__decorate([d.JsonObject("CurrencyModuleMetadata")],Jt),Vt=function(t){function e(){return t.apply(this,arguments)||this}return S(e,t),e}(Ut),Wt=Vt=y.__decorate([d.JsonObject("DatastoreModuleMetadata")],Vt),Ht=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).sellerFeeBasisPoints=0,e.primarySaleFeeBasisPoints=0,e.feeRecipient=void 0,e.symbol=void 0,e.maxSupply=1,e.primarySaleRecipientAddress="",e.baseTokenUri="",e}return S(e,t),e}(Ut);y.__decorate([d.JsonProperty("seller_fee_basis_points",Number,d.PropertyConvertingMode.IGNORE_NULLABLE)],Ht.prototype,"sellerFeeBasisPoints",void 0),y.__decorate([d.JsonProperty("primary_sale_fee_basis_points",Number,d.PropertyConvertingMode.IGNORE_NULLABLE)],Ht.prototype,"primarySaleFeeBasisPoints",void 0),y.__decorate([d.JsonProperty("fee_recipient",String,d.PropertyConvertingMode.IGNORE_NULLABLE)],Ht.prototype,"feeRecipient",void 0),y.__decorate([d.JsonProperty("symbol",String,d.PropertyConvertingMode.IGNORE_NULLABLE)],Ht.prototype,"symbol",void 0),y.__decorate([d.JsonProperty("max_supply",Number,d.PropertyConvertingMode.IGNORE_NULLABLE)],Ht.prototype,"maxSupply",void 0),y.__decorate([d.JsonProperty("primary_sale_recipient_address",String)],Ht.prototype,"primarySaleRecipientAddress",void 0),y.__decorate([d.JsonProperty("base_token_uri",String,d.PropertyConvertingMode.IGNORE_NULLABLE)],Ht.prototype,"baseTokenUri",void 0);var zt=Ht=y.__decorate([d.JsonObject("DropModuleMetadata")],Ht),Kt=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).marketFeeBasisPoints=0,e}return S(e,t),e}(Ut);y.__decorate([d.JsonProperty("seller_fee_basis_points",Number,d.PropertyConvertingMode.IGNORE_NULLABLE)],Kt.prototype,"marketFeeBasisPoints",void 0);var Zt=Kt=y.__decorate([d.JsonObject("MarketModuleMetadata")],Kt),Qt=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).sellerFeeBasisPoints=0,e.feeRecipient=void 0,e.symbol=void 0,e}return S(e,t),e}(Ut);y.__decorate([d.JsonProperty("seller_fee_basis_points",Number,d.PropertyConvertingMode.IGNORE_NULLABLE)],Qt.prototype,"sellerFeeBasisPoints",void 0),y.__decorate([d.JsonProperty("fee_recipient",String,d.PropertyConvertingMode.IGNORE_NULLABLE)],Qt.prototype,"feeRecipient",void 0),y.__decorate([d.JsonProperty("symbol",String,d.PropertyConvertingMode.IGNORE_NULLABLE)],Qt.prototype,"symbol",void 0);var Xt=Qt=y.__decorate([d.JsonObject("NftModuleMetadata")],Qt),Yt=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).sellerFeeBasisPoints=0,e.feeRecipient=void 0,e}return S(e,t),e}(Ut);y.__decorate([d.JsonProperty("seller_fee_basis_points",Number,d.PropertyConvertingMode.IGNORE_NULLABLE)],Yt.prototype,"sellerFeeBasisPoints",void 0),y.__decorate([d.JsonProperty("fee_recipient",String,d.PropertyConvertingMode.IGNORE_NULLABLE)],Yt.prototype,"feeRecipient",void 0);var $t=Yt=y.__decorate([d.JsonObject("PackModuleMetadata")],Yt),te=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).recipientSplits=[],e}return S(e,t),e}(Ut),ee=te=y.__decorate([d.JsonObject("SplitsModuleMetadata")],te),re=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).proposalStartWaitTimeInSeconds=0,e.proposalVotingTimeInSeconds=0,e.votingDelay=0,e.votingPeriod=0,e.votingTokenAddress="",e.votingQuorumFraction=0,e.minimumNumberOfTokensNeededToPropose="0",e}return S(e,t),e}(Ut);y.__decorate([d.JsonProperty("proposal_start_time_in_seconds",Number)],re.prototype,"proposalStartWaitTimeInSeconds",void 0),y.__decorate([d.JsonProperty("proposal_voting_time_in_seconds",Number)],re.prototype,"proposalVotingTimeInSeconds",void 0),y.__decorate([d.JsonProperty("voting_delay",Number)],re.prototype,"votingDelay",void 0),y.__decorate([d.JsonProperty("voting_period",Number)],re.prototype,"votingPeriod",void 0),y.__decorate([d.JsonProperty("voting_token_address",String)],re.prototype,"votingTokenAddress",void 0),y.__decorate([d.JsonProperty("voting_quorum_fraction",Number)],re.prototype,"votingQuorumFraction",void 0),y.__decorate([d.JsonProperty("proposal_token_threshold",String)],re.prototype,"minimumNumberOfTokensNeededToPropose",void 0);var ne=re=y.__decorate([d.JsonObject("VoteModuleMetadata")],re),ae=function(t){function e(){return t.apply(this,arguments)||this}S(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return s.Coin__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.get=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt(this.providerOrSigner,this.address);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getValue=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt(this.providerOrSigner,this.address,u.BigNumber.from(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.totalSupply=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.totalSupply();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balance=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.balanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.readOnlyContract.balanceOf(e);case 3:return t.t1=t.sent,t.next=6,t.t0.getValue.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.allowance=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.allowanceOf.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.allowanceOf=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.allowance(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.getVoteBalance=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getVoteBalanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getVoteBalanceOf=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getVotes(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getDelegation=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getDelegationOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getDelegationOf=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.delegates(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.delegateTo=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("delegate",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transfer=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("transfer",[e,r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setAllowance=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("approve",[e,r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.mint=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.mintTo.call(t.t0,t.t1,t.t2);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mintTo=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("mint",[e,r]);case 2:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.mintBatchTo=function(){var t=b(B.mark((function t(e){var r,n,a,s;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],n=E(e);!(a=n()).done;)r.push(this.contract.interface.encodeFunctionData("mint",[(s=a.value).address,s.amount]));return t.next=4,this.sendTransaction("multicall",[r]);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllHolderBalances=function(){var t=b(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contract.queryFilter(this.contract.filters.Transfer());case 2:return e=t.sent.map((function(t){return t.args})),r={},e.forEach((function(t){var e=t.from,n=t.to,a=t.value;e!==i.AddressZero&&(e in r||(r[e]=u.BigNumber.from(0)),r[e]=r[e].sub(a)),n!==i.AddressZero&&(n in r||(r[n]=u.BigNumber.from(0)),r[n]=r[n].add(a))})),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.burn=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burn",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.burnFrom=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burnFrom",[e,r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("transferFrom",[e,r,n]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.next=3,this.sendTransaction("setRestrictedTransfer",[e]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferBatch=function(){var t=b(B.mark((function t(e){var r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map((function(t){return n.contract.interface.encodeFunctionData("transfer",[t.address,t.amount])})),t.next=3,this.sendTransaction("multicall",[r]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferFromBatch=function(){var t=b(B.mark((function t(e){var r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map((function(t){return n.contract.interface.encodeFunctionData("transferFrom",[t.fromAddress,t.address,t.amount])})),t.next=3,this.sendTransaction("multicall",[r]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(It);ae.moduleType=exports.ModuleType.CURRENCY,ae.roles=[mt.admin,mt.minter,mt.pauser,mt.transfer];var se=function(t){function e(){return t.apply(this,arguments)||this}return S(e,t),e}(ae),ie=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).jsonConvert=new d.JsonConvert,e.moduleType=-1,e}S(e,t);var r=e.prototype;return r.getModuleRoles=function(){return se.roles},r.connectContract=function(){return s.ProtocolControl__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return this.moduleType},r.getModuleAddress=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getAllModulesOfType(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getNFTAddress=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(exports.ModuleType.NFT));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getBundleAddress=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(exports.ModuleType.BUNDLE));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getPackAddress=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(exports.ModuleType.PACK));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getCurrencyAddress=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(exports.ModuleType.CURRENCY));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getMarketAddress=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(exports.ModuleType.MARKET));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getDropAddress=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(exports.ModuleType.DROP));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getDatastoreAddress=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getModuleAddress(exports.ModuleType.DATASTORE));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyTreasury=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getRoyaltyTreasury(e||i.AddressZero);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllContractMetadata=function(){var t=b(B.mark((function t(e){var r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map((function(t){return K(n.providerOrSigner,t,n.ipfsGatewayUrl)})));case 2:return r=t.sent,t.abrupt("return",e.filter((function(t){return t})).map((function(t,e){return{address:t,metadata:r[e]}})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.getPackModules=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getPackAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return C({},t,{type:exports.ModuleType.PACK})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getNFTModules=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getNFTAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return C({},t,{type:exports.ModuleType.NFT})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getCollectionModules=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getBundleModules();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getBundleModules=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getBundleAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return C({},t,{type:exports.ModuleType.BUNDLE})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getCurrencyModules=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getCurrencyAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return C({},t,{type:exports.ModuleType.CURRENCY})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getDatastoreModules=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getDatastoreAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return C({},t,{type:exports.ModuleType.DATASTORE})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getMarketModules=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getMarketAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return C({},t,{type:exports.ModuleType.MARKET})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getDropModules=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getDropAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getAllContractMetadata.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return C({},t,{type:exports.ModuleType.DROP})})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getAllModuleMetadata=function(){var t=b(B.mark((function t(e){var r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e||[exports.ModuleType.NFT,exports.ModuleType.BUNDLE,exports.ModuleType.PACK,exports.ModuleType.TOKEN,exports.ModuleType.MARKET,exports.ModuleType.DATASTORE,exports.ModuleType.DROP,exports.ModuleType.BUNDLE_DROP,exports.ModuleType.VOTE],t.next=3,Promise.all(r.map(function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getModuleAddress(e);case 2:return r=t.sent,t.next=5,n.getAllContractMetadata(r);case 5:return t.abrupt("return",t.sent.map((function(t){return C({},t,{type:e})})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",t.sent.reduce((function(t,e){return t.concat(e)}),[]));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRoyaltyTreasury=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setRoyaltyTreasury",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleRoyaltyTreasury=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setModuleRoyaltyTreasury",[e,r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.withdrawFunds=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("withdrawFunds",[e,r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r._prepareMetadata=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e.image){t.next=2;break}return t.abrupt("return",Promise.resolve(e));case 2:if(void 0!==e.image){t.next=4;break}return t.abrupt("return",Promise.resolve(e));case 4:return t.t0=this.sdk.getStorage(),t.t1=e.image,t.t2=this.address,t.next=9,this.getSignerAddress();case 9:return t.t3=t.sent,t.next=12,t.t0.upload.call(t.t0,t.t1,t.t2,t.t3);case 12:return e.image=t.sent,t.abrupt("return",Promise.resolve(e));case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r._deployModule=function(){var t=b(B.mark((function t(e,r,n){var a,s,i,o,c,p;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getGasPrice();case 2:return i=(s=t.sent)?{gasPrice:u.ethers.utils.parseUnits(s.toString(),"gwei")}:{},t.next=6,(a=new u.ethers.ContractFactory(n.abi,n.bytecode).connect(this.signer)).deploy.apply(a,r.concat([i]));case 6:return o=t.sent,t.next=9,o.deployed();case 9:return c=o.address,t.next=12,this.contract.addModule(c,e,i);case 12:return p=t.sent,t.next=15,p.wait();case 15:return t.abrupt("return",c);case 16:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.deployBundleModule=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=Gt,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=exports.ModuleType.COLLECTION,t.t9=this.address,t.next=20,this.sdk.getForwarderAddress();case 20:return t.t10=t.sent,t.t11=n,t.t12=u.BigNumber.from(e.sellerFeeBasisPoints?e.sellerFeeBasisPoints:0),t.t13=[t.t9,t.t10,t.t11,t.t12],t.t14=s.NFTCollection__factory,t.next=27,t.t7._deployModule.call(t.t7,t.t8,t.t13,t.t14);case 27:return t.abrupt("return",this.sdk.getCollectionModule(t.sent));case 29:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deploySplitsModule=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=ee,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=exports.ModuleType.SPLITS,t.t9=this.address,t.next=20,this.sdk.getForwarderAddress();case 20:return t.t10=t.sent,t.t11=n,t.t12=e.recipientSplits.map((function(t){return t.address})),t.t13=e.recipientSplits.map((function(t){return t.shares})),t.t14=[t.t9,t.t10,t.t11,t.t12,t.t13],t.t15=s.Royalty__factory,t.next=28,t.t7._deployModule.call(t.t7,t.t8,t.t14,t.t15);case 28:return t.abrupt("return",this.sdk.getSplitsModule(t.sent));case 30:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployNftModule=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=Xt,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=exports.ModuleType.NFT,t.t9=this.address,t.t10=e.name,t.t11=e.symbol?e.symbol:"",t.next=22,this.sdk.getForwarderAddress();case 22:return t.t12=t.sent,t.t13=n,t.t14=e.sellerFeeBasisPoints,t.t15=[t.t9,t.t10,t.t11,t.t12,t.t13,t.t14],t.t16=s.NFT__factory,t.next=29,t.t7._deployModule.call(t.t7,t.t8,t.t15,t.t16);case 29:return t.abrupt("return",this.sdk.getNFTModule(t.sent));case 31:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployCurrencyModule=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=qt,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=exports.ModuleType.CURRENCY,t.t9=this.address,t.t10=e.name,t.t11=e.symbol?e.symbol:"",t.next=22,this.sdk.getForwarderAddress();case 22:return t.t12=t.sent,t.t13=n,t.t14=[t.t9,t.t10,t.t11,t.t12,t.t13],t.t15=s.Coin__factory,t.next=28,t.t7._deployModule.call(t.t7,t.t8,t.t14,t.t15);case 28:return t.abrupt("return",this.sdk.getCurrencyModule(t.sent));case 30:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployTokenModule=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=qt,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=exports.ModuleType.CURRENCY,t.t9=this.address,t.t10=e.name,t.t11=e.symbol?e.symbol:"",t.next=22,this.sdk.getForwarderAddress();case 22:return t.t12=t.sent,t.t13=n,t.t14=[t.t9,t.t10,t.t11,t.t12,t.t13],t.t15=s.Coin__factory,t.next=28,t.t7._deployModule.call(t.t7,t.t8,t.t14,t.t15);case 28:return t.abrupt("return",this.sdk.getTokenModule(t.sent));case 30:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployMarketModule=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=Zt,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=exports.ModuleType.MARKET,t.t9=this.address,t.next=20,this.sdk.getForwarderAddress();case 20:return t.t10=t.sent,t.t11=n,t.t12=e.marketFeeBasisPoints?e.marketFeeBasisPoints:0,t.t13=[t.t9,t.t10,t.t11,t.t12],t.t14=s.Market__factory,t.next=27,t.t7._deployModule.call(t.t7,t.t8,t.t13,t.t14);case 27:return t.abrupt("return",this.sdk.getMarketModule(t.sent));case 29:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployPackModule=function(){var t=b(B.mark((function t(e){var r,n,a,i,o,u,c;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=$t,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.next=17,this.getChainID();case 17:return i=(a=ot[t.sent]).vrfCoordinator,o=a.linkTokenAddress,u=a.keyHash,c=a.fees,t.t7=this,t.t8=exports.ModuleType.PACK,t.t9=this.address,t.t10=n,t.t11=i,t.t12=o,t.t13=u,t.t14=c,t.next=29,this.sdk.getForwarderAddress();case 29:return t.t15=t.sent,t.t16=e.sellerFeeBasisPoints?e.sellerFeeBasisPoints:0,t.t17=[t.t9,t.t10,t.t11,t.t12,t.t13,t.t14,t.t15,t.t16],t.t18=s.Pack__factory,t.next=35,t.t7._deployModule.call(t.t7,t.t8,t.t17,t.t18);case 35:return t.abrupt("return",this.sdk.getPackModule(t.sent));case 37:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployDropModule=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e.maxSupply&&Ot(!1),""!==e.primarySaleRecipientAddress&&h.isAddress(e.primarySaleRecipientAddress)||Ot(!1),t.t0=this.jsonConvert,t.next=5,this._prepareMetadata(e);case 5:return t.t1=t.sent,t.t2=zt,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=13,this.getSignerAddress();case 13:return t.t6=t.sent,t.next=16,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 16:return n=t.sent,t.t7=this,t.t8=exports.ModuleType.DROP,t.t9=this.address,t.t10=e.name,t.t11=e.symbol?e.symbol:"",t.next=24,this.sdk.getForwarderAddress();case 24:return t.t12=t.sent,t.t13=n,t.t14=e.baseTokenUri?e.baseTokenUri:"",t.t15=e.maxSupply,t.t16=e.sellerFeeBasisPoints?e.sellerFeeBasisPoints:0,t.t17=e.primarySaleFeeBasisPoints?e.primarySaleFeeBasisPoints:0,t.t18=e.primarySaleRecipientAddress,t.t19=[t.t9,t.t10,t.t11,t.t12,t.t13,t.t14,t.t15,t.t16,t.t17,t.t18],t.t20=s.LazyNFT__factory,t.next=35,t.t7._deployModule.call(t.t7,t.t8,t.t19,t.t20);case 35:return t.abrupt("return",this.sdk.getDropModule(t.sent));case 37:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployBundleDropModule=function(){var t=b(B.mark((function t(e){var r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return""!==e.primarySaleRecipientAddress&&h.isAddress(e.primarySaleRecipientAddress)||Ot(!1),t.t0=this.jsonConvert,t.next=4,this._prepareMetadata(e);case 4:return t.t1=t.sent,t.t2=zt,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=12,this.getSignerAddress();case 12:return t.t6=t.sent,t.next=15,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 15:return n=t.sent,t.t7=Mt,t.next=19,this.getChainID();case 19:return t.t8=t.sent,a=(0,t.t7)(t.t8).wrapped.address,t.t9=this,t.t10=exports.ModuleType.BUNDLE_DROP,t.t11=n,t.t12=this.address,t.next=27,this.sdk.getForwarderAddress();case 27:return t.t13=t.sent,t.t14=a,t.t15=e.primarySaleRecipientAddress,t.t16=e.sellerFeeBasisPoints?e.sellerFeeBasisPoints:0,t.t17=e.primarySaleFeeBasisPoints?e.primarySaleFeeBasisPoints:0,t.t18=[t.t11,t.t12,t.t13,t.t14,t.t15,t.t16,t.t17],t.t19=s.LazyMintERC1155__factory,t.next=36,t.t9._deployModule.call(t.t9,t.t10,t.t18,t.t19);case 36:return t.abrupt("return",this.sdk.getBundleDropModule(t.sent));case 38:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployDatastoreModule=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.jsonConvert,t.next=3,this._prepareMetadata(e);case 3:return t.t1=t.sent,t.t2=Wt,r=t.t0.serializeObject.call(t.t0,t.t1,t.t2),t.t3=this.sdk.getStorage(),t.t4=r,t.t5=this.address,t.next=11,this.getSignerAddress();case 11:return t.t6=t.sent,t.next=14,t.t3.uploadMetadata.call(t.t3,t.t4,t.t5,t.t6);case 14:return n=t.sent,t.t7=this,t.t8=exports.ModuleType.DATASTORE,t.t9=this.address,t.next=20,this.sdk.getForwarderAddress();case 20:return t.t10=t.sent,t.t11=n,t.t12=[t.t9,t.t10,t.t11],t.t13=s.DataStore__factory,t.next=26,t.t7._deployModule.call(t.t7,t.t8,t.t12,t.t13);case 26:return t.abrupt("return",this.sdk.getDatastoreModule(t.sent));case 28:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.deployVoteModule=function(){var t=b(B.mark((function t(e){var r,n,a,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return""!==e.votingTokenAddress&&h.isAddress(e.votingTokenAddress)||Ot(!1),e.votingQuorumFraction>=0&&e.votingQuorumFraction<=100||Ot(!1),t.next=4,this.getChainID();case 4:return n=e.proposalVotingTimeInSeconds/(r=_t[t.sent]).secondsBetweenBlocks,e.votingDelay=e.proposalStartWaitTimeInSeconds/r.secondsBetweenBlocks,e.votingPeriod=n,t.prev=10,t.next=13,s.Coin__factory.connect(e.votingTokenAddress,this.readOnlyContract.provider).callStatic.getPastTotalSupply(0);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(10),Ot(!1);case 18:return t.t1=this.jsonConvert,t.next=21,this._prepareMetadata(e);case 21:return t.t2=t.sent,t.t3=ne,a=t.t1.serializeObject.call(t.t1,t.t2,t.t3),t.t4=this.sdk.getStorage(),t.t5=a,t.t6=this.address,t.next=29,this.getSignerAddress();case 29:return t.t7=t.sent,t.next=32,t.t4.uploadMetadata.call(t.t4,t.t5,t.t6,t.t7);case 32:return i=t.sent,t.t8=this,t.t9=exports.ModuleType.VOTE,t.t10=e.name,t.t11=e.votingTokenAddress,t.t12=e.votingDelay,t.t13=e.votingPeriod,t.t14=e.minimumNumberOfTokensNeededToPropose,t.t15=e.votingQuorumFraction,t.next=43,this.sdk.getForwarderAddress();case 43:return t.t16=t.sent,t.t17=i,t.t18=[t.t10,t.t11,t.t12,t.t13,t.t14,t.t15,t.t16,t.t17],t.t19=s.VotingGovernor__factory,t.next=49,t.t8._deployModule.call(t.t8,t.t9,t.t18,t.t19);case 49:return t.abrupt("return",this.sdk.getVoteModule(t.sent));case 51:case"end":return t.stop()}}),t,this,[[10,15]])})));return function(e){return t.apply(this,arguments)}}(),r.balance=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.provider.getBalance(this.address);case 2:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOfToken=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.ERC20__factory.connect(e,this.providerOrSigner),t.t0=rt,t.t1=this.providerOrSigner,t.t2=e,t.next=6,r.balanceOf(this.address);case 6:return t.t3=t.sent,t.next=9,(0,t.t0)(t.t1,t.t2,t.t3);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(It);ie.roles=[mt.admin];var oe=function(t){function e(){return t.apply(this,arguments)||this}S(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return s.NFTCollection__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.get=function(){var t=b(B.mark((function t(e,r){var n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=Promise,t.t1=dt(this.readOnlyContract,e,this.ipfsGatewayUrl),t.t2=this.readOnlyContract.creator(e),t.t3=this.readOnlyContract.totalSupply(e).catch((function(){return m.BigNumber.from("0")})),!r){t.next=10;break}return t.next=7,this.balanceOf(r,e);case 7:t.t4=t.sent.toNumber(),t.next=11;break;case 10:t.t4=0;case 11:return t.t5=t.t4,t.t6=[t.t1,t.t2,t.t3,t.t5],t.next=15,t.t0.all.call(t.t0,t.t6);case 15:return t.abrupt("return",{creator:(n=t.sent)[1],supply:n[2],metadata:n[0],ownedByAddress:n[3]});case 21:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.getAll=function(){var t=b(B.mark((function t(e){var r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return r=t.sent.toNumber(),t.next=5,Promise.all(Array.from(Array(r).keys()).map((function(t){return n.get(t.toString(),e)})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.balance=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.readOnlyContract,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.balanceOf.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=b(B.mark((function t(e,r,n,a){var i,o,u;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=4;break}return t.next=3,this.readOnlyContract.isApprovedForAll(e,r);case 3:return t.abrupt("return",t.sent);case 4:if(a){t.next=6;break}throw new Error("tokenId is required");case 6:return i=s.ERC721__factory.connect(n,this.providerOrSigner),t.t0=i,t.next=10,this.getSignerAddress();case 10:return t.t1=t.sent,t.t2=this.address,t.next=14,t.t0.isApprovedForAll.call(t.t0,t.t1,t.t2);case 14:return o=t.sent,t.next=17,i.getApproved(a);case 17:return t.t3=t.sent.toLowerCase(),t.t4=this.address.toLowerCase(),u=t.t3===t.t4,t.abrupt("return",o||u);case 21:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.t3={tokenId:r,amount:n},t.t4=[0],t.next=9,t.t0.transferFrom.call(t.t0,t.t1,t.t2,t.t3,t.t4);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.create=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createBatch([e]);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createBatch=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map((function(t){return{metadata:t,supply:0}})),t.abrupt("return",this.createAndMintBatch(r));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createAndMint=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createAndMintBatch([e]);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createAndMintBatch=function(){var t=b(B.mark((function t(e){var r,n,a,s,i,o,u=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map((function(t){return t.metadata})).map((function(t){return u.sdk.getStorage().uploadMetadata(t)})));case 2:return r=t.sent,n=e.map((function(t){return t.supply})),t.next=6,this.getSignerAddress();case 6:return a=t.sent,t.next=9,this.sendTransaction("createNativeTokens",[a,r,n,[0]]);case 9:return i=this.parseEventLogs("NativeTokens",null==(s=t.sent)?void 0:s.logs),o=null==i?void 0:i.tokenIds,t.next=14,Promise.all(o.map((function(t){return u.get(t.toString())})));case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createWithToken=function(){var t=b(B.mark((function t(e,r,n){var a,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.ERC20__factory.connect(e,this.providerOrSigner),t.t0=a,t.next=4,this.getSignerAddress();case 4:return t.t1=t.sent,t.t2=this.address,t.next=8,t.t0.allowance.call(t.t0,t.t1,t.t2);case 8:if(!(t.sent<r)){t.next=12;break}return t.next=12,a.increaseAllowance(this.address,r);case 12:return t.next=14,this.sdk.getStorage().uploadMetadata(n.metadata);case 14:return i=t.sent,t.next=17,this.sendTransaction("wrapERC20",[e,r,n.supply,i]);case 17:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.createWithErc20=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.createWithToken(e,r,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.createWithNFT=function(){var t=b(B.mark((function t(e,r,n){var a,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.ERC721__factory.connect(e,this.providerOrSigner),t.t0=a,t.next=4,this.getSignerAddress();case 4:return t.t1=t.sent,t.t2=this.address,t.next=8,t.t0.isApprovedForAll.call(t.t0,t.t1,t.t2);case 8:if(t.sent){t.next=17;break}return t.next=11,a.getApproved(r);case 11:if(t.t3=t.sent.toLowerCase(),t.t4=this.address.toLowerCase(),t.t3===t.t4){t.next=17;break}return t.next=17,a.setApprovalForAll(this.address,!0);case 17:return t.next=19,this.sdk.getStorage().uploadMetadata(n);case 19:return i=t.sent,t.next=22,this.sendTransaction("wrapERC721",[e,r,i]);case 22:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.createWithERC721=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.createWithNFT(e,r,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.mint=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.mintTo.call(t.t0,t.t1,t.t2);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mintTo=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=[0]),t.next=3,this.sendTransaction("mint",[e,r.tokenId,r.amount,n]);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.mintBatch=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.mintBatchTo.call(t.t0,t.t1,t.t2);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mintBatchTo=function(){var t=b(B.mark((function t(e,r,n){var a,s;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=[0]),a=r.map((function(t){return t.tokenId})),s=r.map((function(t){return t.amount})),t.next=5,this.sendTransaction("mintBatch",[e,a,s,n]);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.burn=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.burnFrom.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.burnBatch=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.burnBatchFrom.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.burnFrom=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burn",[e,r.tokenId,r.amount]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.burnBatchFrom=function(){var t=b(B.mark((function t(e,r){var n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.map((function(t){return t.tokenId})),a=r.map((function(t){return t.amount})),t.next=4,this.sendTransaction("burnBatch",[e,n,a]);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=b(B.mark((function t(e,r,n,a){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[0]),t.next=3,this.sendTransaction("safeTransferFrom",[e,r,n.tokenId,n.amount,a]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.transferBatchFrom=function(){var t=b(B.mark((function t(e,r,n,a){var s,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[0]),s=n.map((function(t){return t.tokenId})),i=n.map((function(t){return t.amount})),t.next=5,this.sendTransaction("safeBatchTransferFrom",[e,r,s,i,a]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=b(B.mark((function t(e){var r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(n=[],r=t.sent.metadata){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return r.seller_fee_basis_points=e,t.t0=this.sdk.getStorage(),t.t1=C({},r),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return a=t.sent,n.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),n.push(this.contract.interface.encodeFunctionData("setContractURI",[a])),t.next=21,this.sendTransaction("multicall",[n]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.next=3,this.sendTransaction("setRestrictedTransfer",[e]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getOwned=function(){var t=b(B.mark((function t(e){var r,n,a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.getSignerAddress();case 6:t.t0=t.sent;case 7:return r=t.t0,t.next=10,this.readOnlyContract.nextTokenId();case 10:return n=t.sent,t.next=13,this.readOnlyContract.balanceOfBatch(Array(n.toNumber()).fill(r),Array.from(Array(n.toNumber()).keys()));case 13:return a=t.sent.map((function(t,e){return{tokenId:e,balance:t}})).filter((function(t){return t.balance.gt(0)})),t.next=17,Promise.all(a.map(function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get(e.tokenId.toString());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=b(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(void 0===(null==(e=(r=t.sent).metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(It);oe.moduleType=exports.ModuleType.BUNDLE,oe.roles=[mt.admin,mt.minter,mt.pauser,mt.transfer];var ue=function(){function t(t){this._conditionStartTime=Date.now(),this._currencyAddress="",this._price=0,this._maxQuantity=u.BigNumber.from(0),this._quantityLimitPerTransaction=u.ethers.constants.MaxUint256,this._merkleRootHash=n.hexZeroPad([0],32),this._merkleCondition=void 0,this.createSnapshot=void 0,this._waitInSeconds=0,this.createSnapshot=t}var e=t.prototype;return e.setPrice=function(t,e){if(void 0===e&&(e=i.AddressZero),!x.isAddress(e))throw new L(e);return t>=0||Ot(!1),this._price=t,this._currencyAddress=e,this},e.setConditionStartTime=function(t){if("number"==typeof t)this._conditionStartTime=Math.floor(t);else{var e=Math.floor((t.getTime()-Date.now())/1e3);this._conditionStartTime=e>=0?e:0}return this},e.setMaxQuantity=function(t){return this._maxQuantity=t,this},e.setMaxQuantityPerTransaction=function(t){var e=u.BigNumber.from(t);return e.gte(1)||Ot(!1),this._quantityLimitPerTransaction=e,this},e.setMerkleRoot=function(t){return this._merkleRootHash=t,this},e.setSnapshot=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createSnapshot(e);case 2:return this._merkleCondition=t.sent,t.abrupt("return",this);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getSnapshot=function(){return this._merkleCondition},e.buildPublicClaimCondition=function(){var t;return{startTimestamp:u.BigNumber.from(this._conditionStartTime.toString()),pricePerToken:this._price,currency:this._currencyAddress||i.AddressZero,maxMintSupply:this._maxQuantity,waitTimeSecondsLimitPerTransaction:this._waitInSeconds,quantityLimitPerTransaction:this._quantityLimitPerTransaction,currentMintSupply:0,merkleRoot:null!=(t=this._merkleCondition)&&t.merkleRoot?this._merkleCondition.merkleRoot:this._merkleRootHash}},e.setWaitTimeBetweenClaims=function(t){return this._waitInSeconds=t,this},t}(),ce=function(){function t(t){this.phases=[],this.createSnapshot=void 0,this.createSnapshot=t}var e=t.prototype;return e.buildConditions=function(){return this.phases.map((function(t){return t.buildPublicClaimCondition()})).sort((function(t,e){return t.startTimestamp.eq(e.startTimestamp)?0:t.startTimestamp.gt(e.startTimestamp)?1:-1}))},e.fromPublicClaimConditions=function(t){for(var e,r=[],n=E(t);!(e=n()).done;){var a=e.value,s=new ue(this.createSnapshot);a.currency&&s.setPrice(a.pricePerToken,a.currency),a.maxMintSupply&&s.setMaxQuantity(a.maxMintSupply),s.setConditionStartTime(new Date(1e3*a.startTimestamp.toNumber())),r.push(s)}return this.phases=r,this},e.newClaimPhase=function(t){var e=t.startTime,r=t.maxQuantity,n=void 0===r?u.ethers.constants.MaxUint256:r,a=t.maxQuantityPerTransaction,s=void 0===a?u.ethers.constants.MaxUint256:a,i=new ue(this.createSnapshot);return i.setConditionStartTime(e),i.setMaxQuantity(u.BigNumber.from(n)),i.setMaxQuantityPerTransaction(u.BigNumber.from(s)),this.phases.push(i),i},e.removeClaimPhase=function(t){if(!(t<0||t>=this.phases.length)){var e=this.buildConditions().splice(t-1,1);this.fromPublicClaimConditions(e)}},e.allSnapshots=function(){return this.phases.filter((function(t){return void 0!==t.getSnapshot()})).map((function(t){return t.getSnapshot()}))},t}();exports.ClaimProof=function(){this.address="",this.proof=[]},y.__decorate([d.JsonProperty("address",String)],exports.ClaimProof.prototype,"address",void 0),y.__decorate([d.JsonProperty("proof",[String])],exports.ClaimProof.prototype,"proof",void 0),exports.ClaimProof=y.__decorate([d.JsonObject("ClaimProof")],exports.ClaimProof),exports.Snapshot=function(){this.merkleRoot="",this.claims=[]},y.__decorate([d.JsonProperty("merkleRoot",String)],exports.Snapshot.prototype,"merkleRoot",void 0),y.__decorate([d.JsonProperty("claims",[exports.ClaimProof])],exports.Snapshot.prototype,"claims",void 0),exports.Snapshot=y.__decorate([d.JsonObject("Snapshot")],exports.Snapshot);var pe=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).storage=e.sdk.getStorage(),e}S(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return s.LazyMintERC1155__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.transformResultToClaimCondition=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt(this.providerOrSigner,e.currency,e.pricePerToken);case 2:return r=t.sent,t.abrupt("return",{startTimestamp:new Date(1e3*u.BigNumber.from(e.startTimestamp).toNumber()),maxMintSupply:e.maxClaimableSupply.toString(),currentMintSupply:e.supplyClaimed.toString(),availableSupply:u.BigNumber.from(e.maxClaimableSupply).sub(e.supplyClaimed).toString(),quantityLimitPerTransaction:e.quantityLimitPerTransaction.toString(),waitTimeSecondsLimitPerTransaction:e.waitTimeInSecondsBetweenClaims.toString(),price:u.BigNumber.from(e.pricePerToken),pricePerToken:u.BigNumber.from(e.pricePerToken),currency:e.currency,currencyContract:e.currency,currencyMetadata:r,merkleRoot:e.merkleRoot});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getTokenMetadata=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt(this.readOnlyContract,e,this.ipfsGatewayUrl);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.get=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.readOnlyContract.totalSupply(e).catch((function(){return u.BigNumber.from(0)})),this.getTokenMetadata(e)]);case 2:return t.abrupt("return",{supply:(r=t.sent)[0],metadata:r[1]});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=b(B.mark((function t(){var e,r=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenIdToMint();case 2:return e=t.sent.toNumber(),t.next=5,Promise.all(Array.from(Array(e).keys()).map((function(t){return r.get(t.toString())})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getOwned=function(){var t=b(B.mark((function t(e){var r,n,a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.getSignerAddress();case 6:t.t0=t.sent;case 7:return r=t.t0,t.next=10,this.readOnlyContract.nextTokenIdToMint();case 10:return n=t.sent,t.next=13,this.readOnlyContract.balanceOfBatch(Array(n.toNumber()).fill(r),Array.from(Array(n.toNumber()).keys()));case 13:return a=t.sent.map((function(t,e){return{tokenId:e,balance:t}})).filter((function(t){return t.balance.gt(0)})),t.next=17,Promise.all(a.map(function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get(e.tokenId.toString());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getActiveClaimCondition=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getIndexOfActiveCondition(e);case 2:return r=t.sent,t.t0=this,t.next=6,this.readOnlyContract.getClaimConditionAtIndex(e,r);case 6:return t.t1=t.sent,t.abrupt("return",t.t0.transformResultToClaimCondition.call(t.t0,t.t1));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllClaimConditions=function(){var t=b(B.mark((function t(e){var r,n,a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.claimConditions(e);case 2:r=t.sent.totalConditionCount.toNumber(),n=[],a=0;case 6:if(!(a<r)){t.next=15;break}return t.t0=n,t.next=10,this.readOnlyContract.getClaimConditionAtIndex(e,a);case 10:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 12:a++,t.next=6;break;case 15:return t.abrupt("return",Promise.all(n.map((function(t){return s.transformResultToClaimCondition(t)}))));case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getSaleRecipient=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.saleRecipient(e);case 2:if((r=t.sent)!==i.AddressZero){t.next=5;break}return t.abrupt("return",this.readOnlyContract.defaultSaleRecipient());case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.balance=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.balanceOf.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.isApprovedForAll(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.lazyMintBatch=function(){var t=b(B.mark((function t(e){var r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createBatch(e);case 2:return r=t.sent,t.next=5,Promise.all(r.map((function(t){return n.get(t.toString())})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.createBatch=function(){var t=b(B.mark((function t(e){var r,n,a,s,i,o,u;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenIdToMint();case 2:return r=t.sent,t.next=5,this.storage.uploadMetadataBatch(e,this.address,r.toNumber());case 5:return n=t.sent,t.next=8,this.sendTransaction("lazyMint",[e.length,n]);case 8:for(s=this.parseEventLogs("LazyMintedTokens",null==(a=t.sent)?void 0:a.logs),i=s[1],o=[],u=s[0];u.lte(i);u=u.add(1))o.push(u.toString());return t.abrupt("return",o);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setSaleRecipient=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.sendTransaction("setSaleRecipient",[e,r]));case 1:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setDefaultSaleRecipient=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.sendTransaction("setDefaultSaleRecipient",[e]));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=b(B.mark((function t(e,r,n,a){var s;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[0]),t.next=3,this.getSignerAddress();case 3:return s=t.sent,t.next=6,this.sendTransaction("safeTransferFrom",[s,e,r,n,a]);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.setClaimCondition=function(){var t=b(B.mark((function t(e,r){var n,a,s,o;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.buildConditions().map((function(t){return{startTimestamp:t.startTimestamp,maxClaimableSupply:t.maxMintSupply,supplyClaimed:0,quantityLimitPerTransaction:t.quantityLimitPerTransaction,waitTimeInSecondsBetweenClaims:t.waitTimeSecondsLimitPerTransaction,pricePerToken:t.pricePerToken===i.AddressZero?$:t.pricePerToken,currency:t.currency,merkleRoot:t.merkleRoot}})),a={},r.allSnapshots().forEach((function(t){a[t.merkleRoot]=t.snapshotUri})),t.next=5,this.getMetadata();case 5:return(s=t.sent.metadata)||Ot(!1),s.merkle=0===r.allSnapshots().length&&"merkle"in s?{}:a,t.next=11,this.storage.upload(JSON.stringify(s));case 11:return o=[this.contract.interface.encodeFunctionData("setContractURI",[t.sent]),this.contract.interface.encodeFunctionData("setClaimConditions",[e,n])],t.next=15,this.sendTransaction("multicall",[o]);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.getClaimConditionFactory=function(){var t=this.sdk.createSnapshot.bind(this.sdk);return new ce(t)},r.setPublicClaimConditions=function(){var t=b(B.mark((function t(e,r){var a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.map((function(t){return{startTimestamp:t.startTimestamp||0,maxClaimableSupply:t.maxClaimableSupply,supplyClaimed:0,quantityLimitPerTransaction:t.quantityLimitPerTransaction||t.maxClaimableSupply,waitTimeInSecondsBetweenClaims:t.waitTimeInSecondsBetweenClaims||0,pricePerToken:t.pricePerToken||0,currency:t.currency||i.AddressZero,merkleRoot:t.merkleRoot||n.hexZeroPad([0],32)}})),t.next=3,this.sendTransaction("setClaimConditions",[e,a]);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.claim=function(){var t=b(B.mark((function t(e,r,a){var o,c,p,f,l,h,v,y,m,x,g,w,b;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[n.hexZeroPad([0],32)]),t.next=3,this.getActiveClaimCondition(e);case 3:return o=t.sent,t.next=6,this.getCallOverrides();case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0={};case 9:return c=t.t0,t.next=12,this.getSignerAddress();case 12:return p=t.sent,t.next=15,this.getMetadata();case 15:if(f=t.sent.metadata,o.merkleRoot.toString().startsWith(i.AddressZero)){t.next=27;break}return t.next=20,this.storage.get(null==f?void 0:f.merkle[o.merkleRoot.toString()]);case 20:if(l=t.sent,h=new d.JsonConvert,v=h.deserializeObject(JSON.parse(l),exports.Snapshot),void 0!==(y=v.claims.find((function(t){return t.address===p})))){t.next=26;break}throw new Error("No claim found for this address");case 26:a=y.proof;case 27:if(!o.pricePerToken.gt(0)){t.next=44;break}if(o.currency!==i.AddressZero){t.next=32;break}c.value=u.BigNumber.from(o.pricePerToken).mul(r),t.next=44;break;case 32:return m=s.ERC20__factory.connect(o.currency,this.providerOrSigner),t.next=35,this.getSignerAddress();case 35:return x=t.sent,g=this.address,t.next=39,m.allowance(x,g);case 39:if(w=t.sent,b=u.BigNumber.from(o.pricePerToken).mul(u.BigNumber.from(r)),!w.lt(b)){t.next=44;break}return t.next=44,this.sendContractTransaction(m,"approve",[g,w.add(b)]);case 44:return t.next=46,this.sendTransaction("claim",[e,r,a],c);case 46:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.burn=function(){var t=b(B.mark((function t(e,r){var n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSignerAddress();case 2:return n=t.sent,t.next=5,this.sendTransaction("burn",[n,e,r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=b(B.mark((function t(e,r,n,a,s){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===s&&(s=[0]),t.next=3,this.sendTransaction("transferFrom",[e,r,n,a,s]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a,s){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=b(B.mark((function t(e){var r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(n=[],r=t.sent.metadata){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return r.seller_fee_basis_points=e,t.t0=this.storage,t.t1=C({},r),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return a=t.sent,n.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),n.push(this.contract.interface.encodeFunctionData("setContractURI",[a])),t.next=21,this.sendTransaction("multicall",[n]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setRestrictedTransfer",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=b(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(void 0===(null==(e=(r=t.sent).metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getClaimConditionsFactory=function(){var t=this.sdk.createSnapshot.bind(this.sdk);return new ce(t)},r.totalSupply=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.totalSupply(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllClaimerAddresses=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contract.queryFilter(this.contract.filters.ClaimedTokens(null,u.BigNumber.from(e)));case 2:return t.abrupt("return",Array.from(new Set(t.sent.map((function(t){return t.args.claimer})))));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.canClaim=function(){var t=b(B.mark((function t(e,r){var n,a,o,c,p,d,f,l;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getActiveClaimCondition(e);case 3:return n=t.sent,t.next=6,this.getClaimerProofs(n.merkleRoot.toString());case 6:return a=t.sent,t.next=9,this.getCallOverrides();case 9:if(t.t0=t.sent,t.t0){t.next=12;break}t.t0={};case 12:if(o=t.t0,!n.pricePerToken.gt(0)){t.next=28;break}if(n.currency!==i.AddressZero){t.next=18;break}o.value=u.BigNumber.from(n.pricePerToken).mul(r),t.next=28;break;case 18:return c=s.ERC20__factory.connect(n.currency,this.providerOrSigner),t.next=21,this.getSignerAddress();case 21:return p=t.sent,d=this.address,t.next=25,c.allowance(p,d);case 25:f=t.sent,l=u.BigNumber.from(n.pricePerToken).mul(u.BigNumber.from(r)),f.lt(l);case 28:return t.next=30,this.readOnlyContract.callStatic.claim(e,r,a,o);case 30:return t.abrupt("return",!0);case 33:return t.prev=33,t.t1=t.catch(0),t.abrupt("return",!1);case 36:case"end":return t.stop()}}),t,this,[[0,33]])})));return function(e,r){return t.apply(this,arguments)}}(),r.getClaimerProofs=function(){var t=b(B.mark((function t(e){var r,n,a,s,i,o;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSignerAddress();case 2:return r=t.sent,t.next=5,this.getMetadata();case 5:return n=t.sent.metadata,t.next=9,this.storage.get(null==n?void 0:n.merkle[e]);case 9:if(a=t.sent,s=new d.JsonConvert,i=s.deserializeObject(JSON.parse(a),exports.Snapshot),void 0!==(o=i.claims.find((function(t){return t.address===r})))){t.next=15;break}return t.abrupt("return",[]);case 15:return t.abrupt("return",o.proof);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(It);pe.moduleType=exports.ModuleType.BUNDLE_DROP,pe.roles=[mt.admin,mt.minter,mt.transfer];var de=function(t){function e(){return t.apply(this,arguments)||this}S(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return s.DataStore__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.getUint=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.ethers.utils.id(e.toString()),t.next=3,this.readOnlyContract.getUint(r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setUint=function(){var t=b(B.mark((function t(e,r){var n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.ethers.utils.id(e.toString()),t.next=3,this.sendTransaction("setUint",[n,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e}(It);de.moduleType=exports.ModuleType.DATASTORE,de.roles=[mt.admin,mt.editor];var fe=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).storage=e.sdk.getStorage(),e}S(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return s.LazyNFT__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.getTokenMetadata=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt(this.readOnlyContract,e,this.ipfsGatewayUrl);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.get=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.ownerOf(e).catch((function(){return i.AddressZero})),this.getTokenMetadata(e)]);case 2:return t.abrupt("return",{owner:(r=t.sent)[0],metadata:r[1]});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=b(B.mark((function t(e){var r,n,a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.BigNumber.from((null==e?void 0:e.start)||0).toNumber(),n=u.BigNumber.from((null==e?void 0:e.count)||100).toNumber(),t.t0=Math,t.next=5,this.readOnlyContract.nextTokenId();case 5:return t.t1=t.sent.toNumber(),t.t2=r+n,a=t.t0.min.call(t.t0,t.t1,t.t2),t.next=10,Promise.all(Array.from(Array(a-r).keys()).map((function(t){return s.get((r+t).toString())})));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllUnclaimed=function(){var t=b(B.mark((function t(e){var r,n,a,s,o=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.BigNumber.from((null==e?void 0:e.start)||0).toNumber(),n=u.BigNumber.from((null==e?void 0:e.count)||100).toNumber(),t.t0=u.BigNumber,t.t1=Math,t.next=6,this.readOnlyContract.nextTokenId();case 6:return t.t2=t.sent.toNumber(),t.t3=r+n,t.t4=t.t1.min.call(t.t1,t.t2,t.t3),a=t.t0.from.call(t.t0,t.t4),t.next=12,this.readOnlyContract.nextMintTokenId();case 12:return s=t.sent,t.next=15,Promise.all(Array.from(Array(a.sub(s).toNumber()).keys()).map((function(t){return o.getTokenMetadata(s.add(t).toString())})));case 15:return t.abrupt("return",t.sent.map((function(t){return{owner:i.AddressZero,metadata:t}})));case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllClaimed=function(){var t=b(B.mark((function t(e){var r,n,a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.BigNumber.from((null==e?void 0:e.start)||0).toNumber(),n=u.BigNumber.from((null==e?void 0:e.count)||100).toNumber(),t.t0=Math,t.next=5,this.readOnlyContract.nextMintTokenId();case 5:return t.t1=t.sent.toNumber(),t.t2=r+n,a=t.t0.min.call(t.t0,t.t1,t.t2),t.next=10,Promise.all(Array.from(Array(a).keys()).map((function(t){return s.get(t.toString())})));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.ownerOf=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.ownerOf(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getOwned=function(){var t=b(B.mark((function t(e){var r,n,a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.getSignerAddress();case 6:t.t0=t.sent;case 7:return r=t.t0,t.next=10,this.readOnlyContract.balanceOf(r);case 10:return n=Array.from(Array(t.sent.toNumber()).keys()),t.next=14,Promise.all(n.map((function(t){return s.readOnlyContract.tokenOfOwnerByIndex(r,t)})));case 14:return a=t.sent,t.next=17,Promise.all(a.map((function(t){return s.get(t.toString())})));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transformResultToClaimCondition=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt(this.providerOrSigner,e.currency,e.pricePerToken);case 2:return r=t.sent,t.abrupt("return",{startTimestamp:new Date(1e3*u.BigNumber.from(e.startTimestamp).toNumber()),maxMintSupply:e.maxMintSupply.toString(),currentMintSupply:e.currentMintSupply.toString(),availableSupply:u.BigNumber.from(e.maxMintSupply).sub(e.currentMintSupply).toString(),quantityLimitPerTransaction:e.quantityLimitPerTransaction.toString(),waitTimeSecondsLimitPerTransaction:e.waitTimeSecondsLimitPerTransaction.toString(),price:u.BigNumber.from(e.pricePerToken),pricePerToken:u.BigNumber.from(e.pricePerToken),currency:e.currency,currencyContract:e.currency,currencyMetadata:r,merkleRoot:e.merkleRoot});case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getActiveMintCondition=function(){var t=b(B.mark((function t(){var e;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getLastStartedMintConditionIndex();case 2:return e=t.sent,t.next=5,this.readOnlyContract.mintConditions(e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getActiveClaimCondition=function(){var t=b(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getLastStartedMintConditionIndex();case 2:return e=t.sent,t.next=5,this.readOnlyContract.mintConditions(e);case 5:return r=t.sent,t.next=8,this.transformResultToClaimCondition(r);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getAllMintConditions=function(){var t=b(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],r=0;case 2:return t.prev=2,t.t0=e,t.next=6,this.readOnlyContract.mintConditions(r);case 6:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),t.next=13;break;case 10:return t.prev=10,t.t2=t.catch(2),t.abrupt("break",16);case 13:r++,t.next=2;break;case 16:return t.abrupt("return",e);case 17:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),r.getAllClaimConditions=function(){var t=b(B.mark((function t(){var e,r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],r=0;case 2:return t.prev=2,t.next=5,this.readOnlyContract.mintConditions(r);case 5:return n=t.sent,t.t0=e,t.next=9,this.transformResultToClaimCondition(n);case 9:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),t.next=16;break;case 13:return t.prev=13,t.t2=t.catch(2),t.abrupt("break",19);case 16:r++,t.next=2;break;case 19:return t.abrupt("return",e);case 20:case"end":return t.stop()}}),t,this,[[2,13]])})));return function(){return t.apply(this,arguments)}}(),r.totalSupply=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.maxTotalSupply=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.maxTotalSupply();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.totalUnclaimedSupply=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return t.t0=t.sent,t.next=5,this.totalClaimedSupply();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.sub.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.totalClaimedSupply=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextMintTokenId();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balance=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.balanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.isApprovedForAll(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=b(B.mark((function t(e,r){var n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSignerAddress();case 2:return n=t.sent,t.next=5,this.sendTransaction("safeTransferFrom(address,address,uint256)",[n,e,r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.lazyMint=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.lazyMintBatch([e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.pinToIpfs=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.uploadBatch(e,this.address);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.lazyMintBatch=function(){var t=b(B.mark((function t(e){var r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map((function(t){return n.storage.uploadMetadata(t)})));case 2:return r=t.sent,t.next=5,this.sendTransaction("lazyMintBatch",[r]);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.lazyMintAmount=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("lazyMintAmount",[e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setMintConditions=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.setClaimConditions(e));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setClaimConditions=function(){var t=b(B.mark((function t(e){var r,n,a,s;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.buildConditions(),n={},e.allSnapshots().forEach((function(t){n[t.merkleRoot]=t.snapshotUri})),t.next=5,this.getMetadata();case 5:return(a=t.sent.metadata)||Ot(!1),a.merkle=0===e.allSnapshots().length&&"merkle"in a?{}:n,t.next=11,this.storage.upload(JSON.stringify(a));case 11:return s=[this.contract.interface.encodeFunctionData("setContractURI",[t.sent]),this.contract.interface.encodeFunctionData("setPublicMintConditions",[r])],t.next=15,this.sendTransaction("multicall",[s]);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getClaimConditionsFactory=function(){var t=this.sdk.createSnapshot.bind(this.sdk);return new ce(t)},r.getMintConditionsFactory=function(){return this.getClaimConditionsFactory()},r.setPublicMintConditions=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map((function(t){return{startTimestamp:t.startTimestampInSeconds||0,maxMintSupply:t.maxMintSupply,currentMintSupply:0,quantityLimitPerTransaction:t.quantityLimitPerTransaction||t.maxMintSupply,waitTimeSecondsLimitPerTransaction:t.waitTimeSecondsLimitPerTransaction||0,pricePerToken:t.pricePerToken||0,currency:t.currency||i.AddressZero,merkleRoot:t.merkleRoot||n.hexZeroPad([0],32)}})),t.next=3,this.sendTransaction("setPublicMintConditions",[r]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.canClaim=function(){var t=b(B.mark((function t(e,r){var a,o,c,p,d,f,l;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=[n.hexZeroPad([0],32)]),t.prev=1,t.next=4,this.getActiveClaimCondition();case 4:return a=t.sent,t.next=7,this.getCallOverrides();case 7:if(t.t0=t.sent,t.t0){t.next=10;break}t.t0={};case 10:if(o=t.t0,!a.pricePerToken.gt(0)){t.next=26;break}if(a.currency!==i.AddressZero){t.next=16;break}o.value=u.BigNumber.from(a.pricePerToken).mul(e),t.next=26;break;case 16:return c=s.ERC20__factory.connect(a.currency,this.providerOrSigner),t.next=19,this.getSignerAddress();case 19:return p=t.sent,d=this.address,t.next=23,c.allowance(p,d);case 23:f=t.sent,l=u.BigNumber.from(a.pricePerToken).mul(u.BigNumber.from(e)),f.lt(l);case 26:return t.next=28,this.readOnlyContract.callStatic.claim(e,r,o);case 28:return t.abrupt("return",!0);case 31:return t.prev=31,t.t1=t.catch(1),t.abrupt("return",!1);case 34:case"end":return t.stop()}}),t,this,[[1,31]])})));return function(e,r){return t.apply(this,arguments)}}(),r.claim=function(){var t=b(B.mark((function t(e,r){var a,o,c,p,f,l,h,v,y,m,x,g,w,k,T,C,S,A,M,O=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=[n.hexZeroPad([0],32)]),t.next=3,this.getActiveClaimCondition();case 3:return a=t.sent,t.next=6,this.getMetadata();case 6:return o=t.sent.metadata,t.next=10,this.getSignerAddress();case 10:if(c=t.sent,a.merkleRoot.toString().startsWith(i.AddressZero)){t.next=21;break}return t.next=14,this.storage.get(null==o?void 0:o.merkle[a.merkleRoot.toString()]);case 14:if(p=t.sent,f=new d.JsonConvert,l=f.deserializeObject(JSON.parse(p),exports.Snapshot),void 0!==(h=l.claims.find((function(t){return t.address===c})))){t.next=20;break}throw new Error("No claim found for this address");case 20:r=h.proof;case 21:return t.next=23,this.getCallOverrides();case 23:if(t.t0=t.sent,t.t0){t.next=26;break}t.t0={};case 26:if(v=t.t0,!a.pricePerToken.gt(0)){t.next=44;break}if(a.currency!==i.AddressZero){t.next=32;break}v.value=u.BigNumber.from(a.pricePerToken).mul(e),t.next=44;break;case 32:return y=s.ERC20__factory.connect(a.currency,this.providerOrSigner),t.next=35,this.getSignerAddress();case 35:return m=t.sent,x=this.address,t.next=39,y.allowance(m,x);case 39:if(g=t.sent,w=u.BigNumber.from(a.pricePerToken).mul(u.BigNumber.from(e)),!g.lt(w)){t.next=44;break}return t.next=44,this.sendContractTransaction(y,"approve",[x,g.add(w)]);case 44:return t.next=46,this.sendTransaction("claim",[e,r],v);case 46:for(T=this.parseEventLogs("Claimed",null==(k=t.sent)?void 0:k.logs),S=(C=T.startTokenId).add(e),A=[],M=C;M.lt(S);M=M.add(1))A.push(u.BigNumber.from(M.toString()));return t.next=54,Promise.all(A.map(function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.get(e.toString());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 54:return t.abrupt("return",t.sent);case 55:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.burn=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burn",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("transferFrom",[e,r,n]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=b(B.mark((function t(e){var r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(n=[],r=t.sent.metadata){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return r.seller_fee_basis_points=e,t.t0=this.storage,t.t1=C({},r),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return a=t.sent,n.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),n.push(this.contract.interface.encodeFunctionData("setContractURI",[a])),t.next=21,this.sendTransaction("multicall",[n]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setBaseTokenUri=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setBaseTokenURI",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setMaxTotalSupply=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setMaxTotalSupply",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setRestrictedTransfer",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=b(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(void 0===(null==(e=(r=t.sent).metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(It);fe.moduleType=exports.ModuleType.DROP,fe.roles=[mt.admin,mt.minter,mt.transfer];var le=function(t){function e(){return t.apply(this,arguments)||this}S(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return s.Market__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.transformResultToListing=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,rt(this.providerOrSigner,e.currency,e.pricePerToken);case 4:r=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:return n=void 0,t.prev=10,t.next=13,ct(this.providerOrSigner,e.assetContract,e.tokenId.toString(),this.ipfsGatewayUrl);case 13:n=t.sent,t.next=18;break;case 16:t.prev=16,t.t1=t.catch(10);case 18:return t.abrupt("return",{id:e.listingId.toString(),seller:e.seller,tokenId:e.tokenId.toString(),tokenContract:e.assetContract,tokenMetadata:n,quantity:e.quantity,price:e.pricePerToken,currencyContract:e.currency,currencyMetadata:r,saleStart:e.saleStart.gt(0)?new Date(1e3*e.saleStart.toNumber()):null,saleEnd:e.saleEnd.gt(0)&&e.saleEnd.lte(Number.MAX_SAFE_INTEGER-1)?new Date(1e3*e.saleEnd.toNumber()):null});case 19:case"end":return t.stop()}}),t,this,[[1,7],[10,16]])})));return function(e){return t.apply(this,arguments)}}(),r.getListing=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllListings=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAll(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.get=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.listings(e);case 2:return r=t.sent,t.next=5,this.transformResultToListing(r);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=b(B.mark((function t(e){var r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],e){t.next=9;break}return t.t0=r,t.next=5,this.readOnlyContract.getAllListings();case 5:t.t1=t.sent,r=t.t0.concat.call(t.t0,t.t1),t.next=38;break;case 9:if(!e.tokenContract||!e.tokenId){t.next=17;break}return t.t2=r,t.next=13,this.readOnlyContract.getListingsByAsset(e.tokenContract,e.tokenId);case 13:t.t3=t.sent,r=t.t2.concat.call(t.t2,t.t3),t.next=38;break;case 17:if(!e.seller){t.next=25;break}return t.t4=r,t.next=21,this.readOnlyContract.getListingsBySeller(e.seller);case 21:t.t5=t.sent,r=t.t4.concat.call(t.t4,t.t5),t.next=38;break;case 25:if(!e.tokenContract){t.next=33;break}return t.t6=r,t.next=29,this.readOnlyContract.getListingsByAssetContract(e.tokenContract);case 29:t.t7=t.sent,r=t.t6.concat.call(t.t6,t.t7),t.next=38;break;case 33:return t.t8=r,t.next=36,this.readOnlyContract.getAllListings();case 36:t.t9=t.sent,r=t.t8.concat.call(t.t8,t.t9);case 38:return r=r.filter((function(t){if(t.quantity.eq(0))return!1;if(e){var r=(null==e?void 0:e.seller)||"",n=(null==e?void 0:e.tokenContract)||"",a=(null==e?void 0:e.tokenId)||"";if(r&&r.toLowerCase()!==t.seller.toLowerCase())return!1;if(n&&n.toLowerCase()!==t.assetContract.toLowerCase())return!1;if(a&&a.toLowerCase()!==t.tokenId.toString().toLowerCase())return!1}return!0})).map((function(t){return n.transformResultToListing(t)})),t.next=41,Promise.all(r);case 41:return t.abrupt("return",t.sent);case 42:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getMarketFeeBps=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.marketFeeBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.list=function(){var t=b(B.mark((function t(e,r,n,a,i,o,u,c){var p,d,f,l,h,v,y;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===o&&(o=0),void 0===u&&(u=0),void 0===c&&(c=0),t.next=5,this.getSignerAddress();case 5:return p=t.sent,d=s.ERC165__factory.connect(e,this.providerOrSigner),t.next=9,d.supportsInterface(W);case 9:if(!t.sent){t.next=26;break}return f=s.ERC721__factory.connect(e,this.providerOrSigner),t.next=14,f.isApprovedForAll(p,this.address);case 14:if(t.sent){t.next=24;break}return t.next=18,f.getApproved(r);case 18:if(t.t0=t.sent.toLowerCase(),t.t1=this.address.toLowerCase(),t.t0===t.t1){t.next=24;break}return t.next=24,this.sendContractTransaction(f,"setApprovalForAll",[this.address,!0]);case 24:t.next=33;break;case 26:return l=s.ERC1155__factory.connect(e,this.providerOrSigner),t.next=29,l.isApprovedForAll(p,this.address);case 29:if(t.sent){t.next=33;break}return t.next=33,this.sendContractTransaction(l,"setApprovalForAll",[this.address,!0]);case 33:return t.next=35,this.sendTransaction("list",[e,r,n,a,i,o,u,c]);case 35:return v=this.parseEventLogs("NewListing",null==(h=t.sent)?void 0:h.logs),y=null==v?void 0:v.listing,t.next=40,this.transformResultToListing(y);case 40:return t.abrupt("return",t.sent);case 41:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a,s,i,o,u){return t.apply(this,arguments)}}(),r.unlistAll=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return r=t.sent.quantity,t.next=5,this.unlist(e,r);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.unlist=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("unlist",[e,r]);case 2:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.buy=function(){var t=b(B.mark((function t(e,r){var n,a,o,c,p,d,f,l;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return n=t.sent,t.next=5,this.getSignerAddress();case 5:if(a=t.sent,o=this.address,c=n.price.mul(u.BigNumber.from(r)),!n.currencyContract||n.currencyContract===i.AddressZero){t.next=16;break}return p=s.ERC20__factory.connect(n.currencyContract,this.providerOrSigner),t.next=12,p.allowance(a,o);case 12:if(!(d=t.sent).lt(c)){t.next=16;break}return t.next=16,this.sendContractTransaction(p,"approve",[o,d.add(c)]);case 16:return t.next=18,this.sendTransaction("buy",[e,r]);case 18:return l=this.parseEventLogs("NewSale",null==(f=t.sent)?void 0:f.logs),t.next=22,this.transformResultToListing(null==l?void 0:l.listing);case 22:return t.abrupt("return",t.sent);case 23:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setMarketFeeBps=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("setMarketFeeBps",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(It);le.moduleType=exports.ModuleType.MARKET,le.roles=[mt.admin,mt.lister,mt.pauser];var he=function(t){function e(){return t.apply(this,arguments)||this}S(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return s.NFT__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.get=function(){var t=b(B.mark((function t(e){var r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.sdk.getStorage(),t.next=3,this.readOnlyContract.tokenURI(e);case 3:return n=t.sent,t.t0=JSON,t.next=7,r.get(n);case 7:return t.t1=t.sent,a=t.t0.parse.call(t.t0,t.t1),t.abrupt("return",C({},a,{id:e,uri:n,image:r.resolveFullUrl(a.image)}));case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=b(B.mark((function t(){var e,r=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return e=t.sent.toNumber(),t.next=5,Promise.all(Array.from(Array(e).keys()).map((function(t){return r.get(t.toString())})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getWithOwner=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.ownerOf(e),this.get(e)]);case 2:return t.abrupt("return",{owner:(r=t.sent)[0],metadata:r[1]});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAllWithOwner=function(){var t=b(B.mark((function t(){var e,r=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return e=t.sent.toNumber(),t.next=5,Promise.all(Array.from(Array(e).keys()).map((function(t){return r.getWithOwner(t.toString())})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.ownerOf=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.readOnlyContract.ownerOf(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",i.AddressZero);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.getOwned=function(){var t=b(B.mark((function t(e){var r,n,a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}t.t0=e,t.next=7;break;case 4:return t.next=6,this.getSignerAddress();case 6:t.t0=t.sent;case 7:return r=t.t0,t.next=10,this.readOnlyContract.balanceOf(r);case 10:return n=Array.from(Array(t.sent.toNumber()).keys()),t.next=14,Promise.all(n.map((function(t){return s.readOnlyContract.tokenOfOwnerByIndex(r,t)})));case 14:return a=t.sent,t.next=17,Promise.all(a.map((function(t){return s.get(t.toString())})));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.totalSupply=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.totalSupply();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balance=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.balanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.isApprovedForAll(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=b(B.mark((function t(e,r){var n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSignerAddress();case 2:return n=t.sent,t.next=5,this.sendTransaction("safeTransferFrom(address,address,uint256)",[n,e,r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.mint=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.mintTo.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mintTo=function(){var t=b(B.mark((function t(e,r){var n,a,s,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(r);case 2:return n=t.sent,t.next=5,this.sendTransaction("mintNFT",[e,n]);case 5:return s=this.parseEventLogs("Minted",null==(a=t.sent)?void 0:a.logs),i=null==s?void 0:s.tokenId,t.next=10,this.get(i.toString());case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.mintBatch=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.mintBatchTo.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.mintBatchTo=function(){var t=b(B.mark((function t(e,r){var n,a,s,i,o=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(r.map((function(t){return o.sdk.getStorage().uploadMetadata(t)})));case 2:return n=t.sent,t.next=5,this.sendTransaction("mintNFTBatch",[e,n]);case 5:return s=this.parseEventLogs("MintedBatch",null==(a=t.sent)?void 0:a.logs),i=s.tokenIds,t.next=10,Promise.all(i.map((function(t){return o.get(t.toString())})));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.burn=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("burn",[e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("transferFrom",[e,r,n]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.next=3,this.sendTransaction("setRestrictedTransfer",[e]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=b(B.mark((function t(e){var r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(n=[],r=t.sent.metadata){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return r.seller_fee_basis_points=e,t.t0=this.sdk.getStorage(),t.t1=C({},r),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return a=t.sent,n.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),n.push(this.contract.interface.encodeFunctionData("setContractURI",[a])),t.next=21,this.sendTransaction("multicall",[n]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=b(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(void 0===(null==(e=(r=t.sent).metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(It);he.moduleType=exports.ModuleType.NFT,he.roles=[mt.admin,mt.minter,mt.pauser,mt.transfer];var ve=function(t){function e(){return t.apply(this,arguments)||this}S(e,t);var r=e.prototype;return r.getModuleRoles=function(){return e.roles},r.connectContract=function(){return s.Pack__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.open=function(){var t=b(B.mark((function t(e){var r,n,a,s,i,o=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("openPack",[e]);case 2:return n=this.parseEventLogs("PackOpenRequest",null==(r=t.sent)?void 0:r.logs),a=n.requestId,s=n.opener,t.next=8,new Promise((function(t){o.readOnlyContract.once(o.readOnlyContract.filters.PackOpenFulfilled(null,s),(function(e,r,n,s,i){a===n&&t({packId:e,opener:r,requestId:a,rewardContract:s,rewardIds:i})}))}));case 8:return i=t.sent.rewardIds,t.next=12,Promise.all(i.map((function(t){return ct(o.providerOrSigner,o.address,t.toString(),o.ipfsGatewayUrl)})));case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.get=function(){var t=b(B.mark((function t(e){var r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([ct(this.providerOrSigner,this.address,e,this.ipfsGatewayUrl),this.readOnlyContract.getPack(e),this.readOnlyContract.totalSupply(e).catch((function(){return u.BigNumber.from("0")}))]);case 2:return a={id:e,metadata:(r=t.sent)[0],creator:(n=r[1]).creator,currentSupply:r[2],openStart:n.openStart.gt(0)?new Date(1e3*n.openStart.toNumber()):null},t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=b(B.mark((function t(){var e,r=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.nextTokenId();case 2:return e=t.sent.toNumber(),t.next=5,Promise.all(Array.from(Array(e).keys()).map((function(t){return r.get(t.toString())})));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getNFTs=function(){var t=b(B.mark((function t(e){var r,n=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.getPackWithRewards(e);case 2:if((r=t.sent).source){t.next=5;break}throw new N;case 5:return t.next=7,Promise.all(r.tokenIds.map((function(t){return ct(n.providerOrSigner,r.source,t.toString(),n.ipfsGatewayUrl)})));case 7:return t.abrupt("return",t.sent.map((function(t,e){return{supply:r.amountsPacked[e],metadata:t}})));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.balanceOf(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.balance=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.next=7,t.t0.balanceOf.call(t.t0,t.t1,t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.isApproved=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.isApprovedForAll(e,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setApproval=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r=!0),t.next=3,this.sendTransaction("setApprovalForAll",[e,r]);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.transfer=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.getSignerAddress();case 3:return t.t1=t.sent,t.t2=e,t.t3=r,t.t4=n,t.t5=[0],t.t6=[t.t1,t.t2,t.t3,t.t4,t.t5],t.next=11,t.t0.sendTransaction.call(t.t0,"safeTransferFrom",t.t6);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.create=function(){var t=b(B.mark((function t(e){var r,n,a,i,o,c,p,d,f,l,h;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.ERC1155__factory.connect(e.assetContract,this.providerOrSigner),t.next=3,this.getSignerAddress();case 3:return i=t.sent,o=e.assets.map((function(t){return t.tokenId})),c=e.assets.map((function(t){return t.amount})),t.next=8,this.sdk.getStorage().uploadMetadata(e.metadata);case 8:return p=u.ethers.utils.defaultAbiCoder.encode(["string","uint256","uint256"],[t.sent,e.secondsUntilOpenStart||0,e.rewardsPerOpen||1]),t.t0=a,t.t1=i,t.t2=this.address,t.t3=o,t.t4=c,t.t5=p,t.next=18,this.getCallOverrides();case 18:return t.t6=t.sent,t.next=21,t.t0.safeBatchTransferFrom.call(t.t0,t.t1,t.t2,t.t3,t.t4,t.t5,t.t6);case 21:return d=t.sent,t.next=24,d.wait();case 24:return l=null==(f=t.sent)||null==(r=f.events)?void 0:r.find((function(t){return"PackCreated"===t.event})),h=null==l||null==(n=l.args)?void 0:n.packId,t.next=29,this.get(h);case 29:return t.abrupt("return",t.sent);case 30:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.transferFrom=function(){var t=b(B.mark((function t(e,r,n,a){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[0]),t.next=3,this.sendTransaction("safeTransferFrom",[e,r,n.tokenId,n.amount,a]);case 3:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.transferBatchFrom=function(){var t=b(B.mark((function t(e,r,n,a){var s,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=[0]),s=n.map((function(t){return t.tokenId})),i=n.map((function(t){return t.amount})),t.next=5,this.sendTransaction("safeBatchTransferFrom",[e,r,s,i,a]);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),r.getLinkBalance=function(){var t=b(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getChainID();case 2:return r=s.ERC20__factory.connect((e=ot[t.sent]).linkTokenAddress,this.providerOrSigner),t.t0=rt,t.t1=this.providerOrSigner,t.t2=e.linkTokenAddress,t.next=10,r.balanceOf(this.address);case 10:return t.t3=t.sent,t.next=13,(0,t.t0)(t.t1,t.t2,t.t3);case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.depositLink=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getChainID();case 2:return r=s.ERC20__factory.connect(ot[t.sent].linkTokenAddress,this.providerOrSigner),t.t0=r,t.t1=this.address,t.t2=e,t.next=10,this.getCallOverrides();case 10:return t.t3=t.sent,t.next=13,t.t0.transfer.call(t.t0,t.t1,t.t2,t.t3);case 13:return n=t.sent,t.next=16,n.wait();case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.withdrawLink=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("transferLink",[e,r]);case 2:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setRoyaltyBps=function(){var t=b(B.mark((function t(e){var r,n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(n=[],r=t.sent.metadata){t.next=7;break}throw new Error("No metadata found, this module might be invalid!");case 7:return r.seller_fee_basis_points=e,t.t0=this.sdk.getStorage(),t.t1=C({},r),t.t2=this.address,t.next=13,this.getSignerAddress();case 13:return t.t3=t.sent,t.next=16,t.t0.uploadMetadata.call(t.t0,t.t1,t.t2,t.t3);case 16:return a=t.sent,n.push(this.contract.interface.encodeFunctionData("setRoyaltyBps",[e])),n.push(this.contract.interface.encodeFunctionData("setContractURI",[a])),t.next=21,this.sendTransaction("multicall",[n]);case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setRestrictedTransfer=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=!1),t.next=3,this.sendTransaction("setRestrictedTransfer",[e]);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getRoyaltyBps=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.royaltyBps();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRoyaltyRecipientAddress=function(){var t=b(B.mark((function t(){var e,r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(void 0===(null==(e=(r=t.sent).metadata)?void 0:e.fee_recipient)){t.next=5;break}return t.abrupt("return",r.metadata.fee_recipient);case 5:return t.abrupt("return","");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(It);ve.moduleType=exports.ModuleType.PACK,ve.roles=[mt.admin,mt.minter,mt.pauser,mt.transfer];var ye,me,xe,ge=function(t){function e(){return t.apply(this,arguments)||this}S(e,t);var r=e.prototype;return r.connectContract=function(){return s.Royalty__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.get=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt(this.providerOrSigner,this.address);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getAllRecipients=function(){var t=b(B.mark((function t(){var e,r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],r=u.BigNumber.from(0);case 2:return t.prev=3,t.next=6,this.readOnlyContract.payee(r);case 6:return n=t.sent,t.t0=e,t.next=10,this.getRecipientSplitPercentage(n);case 10:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),r=r.add(1),t.next=22;break;case 15:if(t.prev=15,t.t2=t.catch(3),!("method"in t.t2)||!t.t2.method.toLowerCase().includes("payee(uint256)")){t.next=21;break}return t.abrupt("break",24);case 21:throw t.t2;case 22:t.next=2;break;case 24:return t.abrupt("return",e);case 25:case"end":return t.stop()}}),t,this,[[3,15]])})));return function(){return t.apply(this,arguments)}}(),r.getRecipientSplitPercentage=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.readOnlyContract.totalShares(),this.readOnlyContract.shares(e)]);case 2:return n=(r=t.sent)[0],t.abrupt("return",{address:e,splitPercentage:r[1].mul(u.BigNumber.from(1e7)).div(n).toNumber()/1e5});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOf=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.provider.getBalance(this.address);case 2:return r=t.sent,t.next=5,this.readOnlyContract["totalReleased()"]();case 5:return n=r.add(t.sent),t.t0=this,t.t1=e,t.t2=n,t.next=12,this.readOnlyContract["released(address)"](e);case 12:return t.t3=t.sent,t.abrupt("return",t.t0._pendingPayment.call(t.t0,t.t1,t.t2,t.t3));case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.balanceOfToken=function(){var t=b(B.mark((function t(e,r){var n,a,i,o;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.ERC20__factory.connect(r,this.providerOrSigner),t.next=3,n.balanceOf(this.address);case 3:return a=t.sent,t.next=6,this.readOnlyContract["totalReleased(address)"](r);case 6:return i=a.add(t.sent),t.t0=this,t.t1=e,t.t2=i,t.next=13,this.readOnlyContract["released(address,address)"](r,e);case 13:return t.t3=t.sent,t.next=16,t.t0._pendingPayment.call(t.t0,t.t1,t.t2,t.t3);case 16:return o=t.sent,t.next=19,rt(this.providerOrSigner,r,o);case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.withdraw=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("release(address)",[e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r._pendingPayment=function(){var t=b(B.mark((function t(e,r,n){var a,s;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=r,t.next=3,this.readOnlyContract.shares(e);case 3:return t.t1=t.sent,a=t.t0.mul.call(t.t0,t.t1),t.t2=a,t.next=8,this.readOnlyContract.totalShares();case 8:return t.t3=t.sent,s=t.t2.div.call(t.t2,t.t3),t.abrupt("return",s.sub(n));case 11:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.withdrawToken=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("release(address,address)",[r,e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.distribute=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("distribute()",[]);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.distributeToken=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendTransaction("distribute(address)",[e]);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(Lt);ge.moduleType=exports.ModuleType.SPLITS,function(t){t[t.StartTime=0]="StartTime",t[t.LimitPerWallet=1]="LimitPerWallet",t[t.MerkleRoot=2]="MerkleRoot",t[t.WaitTimeBetweenClaims=3]="WaitTimeBetweenClaims"}(ye||(ye={})),(me=exports.ProposalState||(exports.ProposalState={}))[me.Pending=0]="Pending",me[me.Active=1]="Active",me[me.Canceled=2]="Canceled",me[me.Defeated=3]="Defeated",me[me.Succeeded=4]="Succeeded",me[me.Queued=5]="Queued",me[me.Expired=6]="Expired",me[me.Executed=7]="Executed",(xe=exports.VoteType||(exports.VoteType={}))[xe.Against=0]="Against",xe[xe.For=1]="For",xe[xe.Abstain=2]="Abstain";var we=function(t){function e(){return t.apply(this,arguments)||this}S(e,t);var r=e.prototype;return r.connectContract=function(){return s.VotingGovernor__factory.connect(this.address,this.providerOrSigner)},r.getModuleType=function(){return e.moduleType},r.settings=function(){var t=b(B.mark((function t(){var e,r,n,a,s,i,o;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.readOnlyContract.votingDelay(),this.readOnlyContract.votingPeriod(),this.readOnlyContract.token(),this.readOnlyContract.quorumNumerator(),this.readOnlyContract.proposalThreshold()]);case 2:return r=(e=t.sent)[0],n=e[1],a=e[2],s=e[3],i=e[4],t.next=10,tt(this.providerOrSigner,a);case 10:return o=t.sent,t.abrupt("return",{votingDelay:r.toString(),votingPeriod:n.toString(),votingTokenAddress:a,votingTokenMetadata:o,votingQuorumFraction:s.toString(),proposalTokenThreshold:i.toString()});case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.get=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureExists(e);case 2:return t.next=4,this.getAll();case 4:if(0!==(r=t.sent.filter((function(t){return t.proposalId.toLowerCase()===e.toLowerCase()}))).length){t.next=8;break}throw new Error("proposal not found");case 8:return t.abrupt("return",r[0]);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAll=function(){var t=b(B.mark((function t(){var e,r,n,a,s,i,o,u,c,p,d=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.queryFilter(this.contract.filters.ProposalCreated());case 2:return e=t.sent,r=[],t.next=6,Promise.all(e.map((function(t){return d.readOnlyContract.state(t.args.proposalId)})));case 6:return n=t.sent,t.next=9,Promise.all(e.map((function(t){return d.readOnlyContract.proposalVotes(t.args.proposalId)})));case 9:for(a=t.sent,s=0;s<e.length;s++){for(i=e[s].args,o=n[s],u=[{type:exports.VoteType.Against,label:"Against",count:a[s].againstVotes},{type:exports.VoteType.For,label:"For",count:a[s].forVotes},{type:exports.VoteType.Abstain,label:"Abstain",count:a[s].abstainVotes}],c=[],p=0;p<i.targets.length;p++)c.push({to:i.targets[p],value:i.values[p]||0,data:i.calldatas[p]});r.push({proposalId:i.proposalId.toString(),proposer:i.proposer,description:i.description,startBlock:i.startBlock,endBlock:i.endBlock,state:o,votes:u,executions:c.map((function(t){return{toAddress:t.to,nativeTokenValue:t.value,transactionData:t.data}}))})}return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.propose=function(){var t=b(B.mark((function t(e,r){var n,a,s,i,o;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.map((function(t){return t.toAddress})),a=r.map((function(t){return t.nativeTokenValue})),s=r.map((function(t){return t.transactionData})),t.next=5,this.sendTransaction("propose",[n,a,s,e]);case 5:return o=this.parseEventLogs("ProposalCreated",null==(i=t.sent)?void 0:i.logs),t.abrupt("return",o.proposalId);case 8:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.vote=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=""),t.next=3,this.ensureExists(e);case 3:return t.next=5,this.sendTransaction("castVoteWithReason",[e,r,n]);case 5:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),r.hasVoted=function(){var t=b(B.mark((function t(e,r){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.next=3,this.getSignerAddress();case 3:r=t.sent;case 4:return t.abrupt("return",this.readOnlyContract.hasVoted(e,r));case 5:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.execute=function(){var t=b(B.mark((function t(e){var r,n,a,s,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureExists(e);case 2:return t.next=4,this.get(e);case 4:return n=(r=t.sent).executions.map((function(t){return t.toAddress})),a=r.executions.map((function(t){return t.nativeTokenValue})),s=r.executions.map((function(t){return t.transactionData})),i=u.ethers.utils.id(r.description),t.next=11,this.sendTransaction("execute",[n,a,s,i]);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.canExecute=function(){var t=b(B.mark((function t(e){var r,n,a,s,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureExists(e);case 2:return t.next=4,this.get(e);case 4:return n=(r=t.sent).executions.map((function(t){return t.toAddress})),a=r.executions.map((function(t){return t.nativeTokenValue})),s=r.executions.map((function(t){return t.transactionData})),i=u.ethers.utils.id(r.description),t.prev=9,t.next=12,this.readOnlyContract.callStatic.execute(n,a,s,i);case 12:return t.abrupt("return",!0);case 15:return t.prev=15,t.t0=t.catch(9),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,this,[[9,15]])})));return function(e){return t.apply(this,arguments)}}(),r.balance=function(){var t=b(B.mark((function t(){var e;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.provider.getBalance(this.address);case 2:return t.abrupt("return",{name:"",symbol:"",decimals:18,value:(e=t.sent).toString(),displayValue:u.ethers.utils.formatUnits(e,18)});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.balanceOfToken=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.ERC20__factory.connect(e,this.readOnlyContract.provider),t.t0=rt,t.t1=this.providerOrSigner,t.t2=e,t.next=6,r.balanceOf(this.address);case 6:return t.t3=t.sent,t.next=9,(0,t.t0)(t.t1,t.t2,t.t3);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.setModuleMetadata=function(){var t=b(B.mark((function t(e){var r;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getStorage().uploadMetadata(e);case 2:return r=t.sent,t.next=5,this.sendTransaction("setContractURI",[r]);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.ensureExists=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.readOnlyContract.state(e);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(Lt);we.moduleType=exports.ModuleType.VOTE,globalThis.FormData||(globalThis.FormData=require("form-data"));var be=function(){function t(t){this.gatewayUrl=void 0,this.gatewayUrl=t.replace(/\/$/,"")+"/"}var e=t.prototype;return e.upload=function(){var t=b(B.mark((function t(e,r,n){var a,s,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={"X-App-Name":"CONSOLE-TS-SDK-"+r,"X-Public-Address":n||""},(s=new FormData).append("file",e),t.prev=3,t.next=6,fetch("https://upload.nftlabs.co/upload",{method:"POST",body:s,headers:a});case 6:if(200===(i=t.sent).status){t.next=9;break}throw new Error("Failed to upload to IPFS [status code = "+i.status+"]");case 9:return t.next=11,i.json();case 11:return t.abrupt("return",t.sent.IpfsUri);case 15:throw t.prev=15,t.t0=t.catch(3),new I("Failed to upload to IPFS: "+t.t0);case 18:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e,r,n){return t.apply(this,arguments)}}(),e.uploadBatch=function(){var t=b(B.mark((function t(e,r,n){var a,s,i,o,u;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=0),t.next=3,this.getUploadToken(r||"");case 3:return a=t.sent,s={name:"CONSOLE-TS-SDK-"+r},i=new FormData,e.forEach((function(t,e){var r="files/"+(n+e);"undefined"==typeof window?i.append("file",t,{filepath:r}):i.append("file",new Blob([t]),r)})),i.append("pinataMetadata",JSON.stringify(s)),t.next=10,fetch("https://api.pinata.cloud/pinning/pinFileToIPFS",{method:"POST",headers:{Authorization:"Bearer "+a},body:i});case 10:return o=t.sent,t.next=13,o.json();case 13:if(u=t.sent,o.ok){t.next=16;break}throw new I("Failed to upload files to IPFS");case 16:return t.abrupt("return","ipfs://"+u.IpfsHash+"/");case 17:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.getUploadToken=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={"X-App-Name":"CONSOLE-TS-SDK-"+e},t.next=3,fetch("https://upload.nftlabs.co/grant",{method:"GET",headers:r});case 3:if((n=t.sent).ok){t.next=6;break}throw new D("Failed to get upload token");case 6:return t.next=8,n.text();case 8:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.get=function(){var t=b(B.mark((function t(e){var r,n;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,e&&(r=this.resolveFullUrl(e)),t.prev=2,t.next=5,fetch(r);case 5:if(200===(n=t.sent).status){t.next=8;break}throw new Error("Status code (!= 200) ="+n.status);case 8:return t.next=10,n.text();case 10:return t.abrupt("return",t.sent);case 13:throw t.prev=13,t.t0=t.catch(2),new D("Failed to fetch IPFS file: "+r,t.t0);case 16:case"end":return t.stop()}}),t,this,[[2,13]])})));return function(e){return t.apply(this,arguments)}}(),e.uploadFileHandler=function(){var t=b(B.mark((function t(e){var r,n,a,s;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object.keys(e),t.t0=B.keys(r);case 2:if((t.t1=t.t0()).done){t.next=18;break}if(!(s=(a=e[r[n=t.t1.value]])instanceof File||a instanceof Buffer)){t.next=10;break}return t.next=9,this.upload(e[r[n]]);case 9:e[r[n]]=t.sent;case 10:if(!s||"string"==typeof e[r[n]]){t.next=12;break}throw new Error("Upload to IPFS failed");case 12:if("object"!=typeof a){t.next=16;break}return t.next=15,this.uploadFileHandler(e[r[n]]);case 15:e[r[n]]=t.sent;case 16:t.next=2;break;case 18:return t.abrupt("return",e);case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.uploadMetadata=function(){var t=b(B.mark((function t(e,r,n){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=2;break}return t.abrupt("return",e);case 2:return t.next=4,this.uploadFileHandler(e);case 4:return e=t.sent,t.next=7,this.upload(JSON.stringify(e),r,n);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.uploadMetadataBatch=function(){var t=b(B.mark((function t(e,r,n){var a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map((function(t){return"string"==typeof t?t:s.uploadFileHandler(t)})));case 2:return a=t.sent,t.next=5,this.uploadBatch(a.map((function(t){return JSON.stringify(t)})),r,n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.resolveFullUrl=function(t){return t&&t.toLowerCase().includes("ipfs://")?t.replace("ipfs://",this.gatewayUrl):t},t}(),ke=function(t){function e(){return t.apply(this,arguments)||this}S(e,t);var r=e.prototype;return r.connectContract=function(){return s.Registry__factory.connect(this.address,this.providerOrSigner)},r.getProtocolContracts=function(){var t=b(B.mark((function t(){var e,r,n,a,s=this;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSignerAddress();case 2:return e=t.sent,t.next=5,this.readOnlyContract.getProtocolControlCount(e);case 5:return r=Array.from(Array(t.sent.toNumber()).keys()).reverse(),t.next=9,Promise.all(r.map((function(t){return s.readOnlyContract.getProtocolControl(e,(t+1).toString())})));case 9:return n=t.sent,t.next=12,Promise.all(n.map((function(t){return K(s.providerOrSigner,t,s.ipfsGatewayUrl).catch((function(){}))})));case 12:return a=t.sent,t.abrupt("return",r.map((function(t,e){return{address:n[e],version:t,metadata:a[e]}})));case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(Lt),Te=function(){function t(t,e){this.options=void 0,this.defaultOptions={ipfsGatewayUrl:"https://cloudflare-ipfs.com/ipfs/",registryContractAddress:"",maxGasPriceInGwei:100,gasSpeed:"fastest",transactionRelayerUrl:"",transactionRelayerSendFunction:this.defaultRelayerSendFunction.bind(this),transactionRelayerForwarderAddress:"0xc82BbE41f2cF04e3a8efA18F7032BDD7f6d98a81",readOnlyRpcUrl:""},this.modules=new Map,this.providerOrSigner=void 0,this._signer=null,this._jsonConvert=new d.JsonConvert,this.storage=void 0,this._registry=null,this.providerOrSigner=this.setProviderOrSigner(t),this.options=C({},this.defaultOptions,e),this.storage=new be(this.options.ipfsGatewayUrl)}var r=t.prototype;return r.updateModuleSigners=function(){for(var t,e=E(this.modules);!(t=e()).done;){var r=t.value[1];this.isReadOnly()&&r.clearSigner(),r.setProviderOrSigner(this.providerOrSigner)}},r.getChainID=function(){var t=b(B.mark((function t(){var e;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=p.Provider.isProvider(this.providerOrSigner)?this.providerOrSigner:this.providerOrSigner.provider)||Ot(!1),t.next=4,e.getNetwork();case 4:return t.abrupt("return",t.sent.chainId);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRegistryAddress=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.options.registryContractAddress){t.next=2;break}return t.abrupt("return",this.options.registryContractAddress);case 2:return t.t0=At,t.next=5,this.getChainID();case 5:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getRegistryModule=function(){var t=b(B.mark((function t(){var e;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getRegistryAddress();case 2:return(e=t.sent)||Ot(!1),t.abrupt("return",this.registry=this.getOrCreateModule(e,ke));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getOrCreateModule=function(t,e){if(this.modules.has(t))return this.modules.get(t);var r=new e(this.providerOrSigner,t,this.options,this);return this.modules.set(t,r),r},r.getForwarderAddress=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.registry,t.t0){t.next=5;break}return t.next=4,this.getRegistryModule();case 4:t.t0=t.sent;case 5:return t.next=7,t.t0.readOnlyContract.forwarder();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getApps=function(){var t=b(B.mark((function t(){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.registry,t.t0){t.next=5;break}return t.next=4,this.getRegistryModule();case 4:t.t0=t.sent;case 5:return t.abrupt("return",t.t0.getProtocolContracts());case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.createApp=function(){var t=b(B.mark((function t(e){var r,n,a,s,i,u;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.registry,t.t0){t.next=5;break}return t.next=4,this.getRegistryModule();case 4:t.t0=t.sent;case 5:return n=t.t0.contract,t.next=8,this.getGasPrice();case 8:return s={},"number"==typeof(a=t.sent)&&(s.gasPrice=o.parseUnits(a.toString(),"gwei")),t.t1=q,t.t2=e,t.t3=n.address,t.next=16,null==(r=this.signer)?void 0:r.getAddress();case 16:if(t.t4=t.sent,t.t4){t.next=19;break}t.t4=void 0;case 19:return t.t5=t.t4,t.next=22,(0,t.t1)(t.t2,t.t3,t.t5);case 22:return i=t.sent,t.next=25,n.deployProtocol(i,s);case 25:return u=t.sent,t.next=28,u.wait();case 28:return t.abrupt("return",t.sent);case 29:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getGasPrice=function(){var t=b(B.mark((function t(e,r){var n,a;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e||this.options.gasSpeed,a=r||this.options.maxGasPriceInGwei,t.t0=bt,t.next=5,this.getChainID();case 5:return t.t1=t.sent,t.t2=n,t.t3=a,t.next=10,(0,t.t0)(t.t1,t.t2,t.t3);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.setProviderOrSigner=function(t){return this.providerOrSigner=p.Provider.isProvider(t)||u.Signer.isSigner(t)?t:u.ethers.getDefaultProvider(t),this.signer=u.Signer.isSigner(t)?t:null,this.updateModuleSigners(),this.providerOrSigner},r.isReadOnly=function(){return!u.Signer.isSigner(this.signer)},r.getContractMetadata=function(){var t=b(B.mark((function t(e){return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=C,t.t1={},t.next=4,K(this.providerOrSigner,e,this.options.ipfsGatewayUrl);case 4:return t.t2=t.sent,t.t3={address:e},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getAppModule=function(t){return this.getOrCreateModule(t,ie)},r.getNFTModule=function(t){return this.getOrCreateModule(t,he)},r.getCollectionModule=function(t){return this.getBundleModule(t)},r.getBundleModule=function(t){return this.getOrCreateModule(t,oe)},r.getPackModule=function(t){return this.getOrCreateModule(t,ve)},r.getCurrencyModule=function(t){return this.getOrCreateModule(t,se)},r.getTokenModule=function(t){return this.getOrCreateModule(t,ae)},r.getDatastoreModule=function(t){return this.getOrCreateModule(t,de)},r.getMarketModule=function(t){return this.getOrCreateModule(t,le)},r.getDropModule=function(t){return this.getOrCreateModule(t,fe)},r.getBundleDropModule=function(t){return this.getOrCreateModule(t,pe)},r.getSplitsModule=function(t){return this.getOrCreateModule(t,ge)},r.getVoteModule=function(t){return this.getOrCreateModule(t,we)},r.invokeRoute=function(t,e){var r=t.split(".");if(r.length>0&&"thirdweb"===r[0]){if(4===r.length){var n,a=r[3];return(n=this.getModuleByName(r[1],r[2]))[a].apply(n,e.arguments||[])}if(3===r.length)throw new Error("reserved for thirdweb.bridge.function_name");if(2===r.length)return this[r[1]].apply(this,e.arguments||[])}throw new Error("uknown route")},r.getModuleByName=function(t,e){if("currency"===t)return this.getCurrencyModule(e);if("nft"===t)return this.getNFTModule(e);if("market"===t)return this.getMarketModule(e);if("bundle"===t||"collection"===t)return this.getCollectionModule(e);if("drop"===t)return this.getDropModule(e);if("splits"===t)return this.getSplitsModule(e);if("pack"===t)return this.getPackModule(e);if("datastore"===t)return this.getDatastoreModule(e);if("app"===t||"project"===t)return this.getAppModule(e);throw new Error("unsupported module")},r.defaultRelayerSendFunction=function(){var t=b(B.mark((function t(e,r){var n,a,s,i;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="forward",null!=e&&e.owner&&(n="permit"),a=JSON.stringify({request:e,signature:r,type:n}),t.next=5,fetch(this.options.transactionRelayerUrl,{method:"POST",body:a});case 5:if(!(s=t.sent).ok){t.next=12;break}return t.next=9,s.json();case 9:return i=JSON.parse(t.sent.result),t.abrupt("return",i.txHash);case 12:throw new Error("relay transaction failed");case 13:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),r.createSnapshot=function(){var t=b(B.mark((function t(r){var n,a,s,i,o,u;return B.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(new Set(r).size<r.length)){t.next=3;break}throw new U;case 3:return t.next=5,new Promise((function(t){t(e(require("keccak256")))}));case 5:return n=t.sent.default,a=r.map((function(t){return n(t)})),s=new l(a,n,{sort:!0}),i={merkleRoot:s.getHexRoot(),claims:r.map((function(t){return{address:t,proof:s.getHexProof(n(t))}}))},o=JSON.stringify(this._jsonConvert.serializeObject(i,exports.Snapshot)),t.next=13,this.storage.upload(o);case 13:return u=t.sent,t.abrupt("return",{merkleRoot:s.getHexRoot(),snapshotUri:u,snapshot:i});case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.getStorage=function(){return this.storage},r.overrideStorage=function(t){this.storage=t},T(t,[{key:"signer",get:function(){return this._signer},set:function(t){this._signer=t}},{key:"registry",get:function(){return this._registry},set:function(t){this._registry=t}}]),t}(),Ce=Te;globalThis.fetch||(globalThis.fetch=r),exports.AppModule=ie,exports.BundleDropModule=pe,exports.BundleModule=oe,exports.ChainlinkVrf=ot,exports.ClaimConditionFactory=ce,exports.ClaimConditionPhase=ue,exports.CurrencyModule=se,exports.DEFAULT_BLOCK_TIMES_FALLBACK=_t,exports.DatastoreModule=de,exports.DropModule=fe,exports.DuplicateLeafsError=U,exports.FetchError=D,exports.InterfaceId_IERC1155=H,exports.InterfaceId_IERC721=W,exports.InvalidAddressError=L,exports.MarketModule=le,exports.NATIVE_TOKEN_ADDRESS=$,exports.NFTLabsSDK=Ce,exports.NFTModule=he,exports.NotFoundError=N,exports.PackModule=ve,exports.RolesMap=mt,exports.ThirdwebSDK=Te,exports.TokenModule=ae,exports.UploadError=I,exports.VoteModule=we,exports.convertModuleTypeToName=function(t){return c.$enum(exports.ModuleType).getKeyOrDefault(t,void 0)},exports.convertNameToModuleType=function(t){return c.$enum(exports.ModuleType).getValueOrDefault(null==t?void 0:t.toUpperCase(),void 0)},exports.estimateBlockAtTime=function(t,e){return Pt.apply(this,arguments)},exports.generateRoot=function(t){return new f.MerkleTree(t,g.SHA256,{hashLeaves:!0,sortLeaves:!0}).getRoot().toString("hex")},exports.getContractMetadata=K,exports.getCurrencyMetadata=tt,exports.getCurrencyValue=rt,exports.getGasPriceForChain=bt,exports.getMetadataWithoutContract=ct,exports.getRoleHash=gt,exports.getTokenMetadata=dt,exports.getTokenUri=lt,exports.isContract=Q,exports.replaceIpfsWithGateway=j,exports.uploadMetadata=q,exports.uploadToIPFS=G;
//# sourceMappingURL=sdk.cjs.production.min.js.map
