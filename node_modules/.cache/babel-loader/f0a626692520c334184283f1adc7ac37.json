{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { createJsonRpcRequestPayload, standardizeJsonRpcRequestPayload } from '../core/json-rpc';\nimport { BaseModule } from './base-module';\nimport { createExtensionNotInitializedError, MagicExtensionError, MagicExtensionWarning } from '../core/sdk-exceptions';\nimport { createPromiEvent, encodeJSON, decodeJSON, encodeQueryParameters, decodeQueryParameters, storage, isPromiEvent } from '../util';\n\nvar BaseExtension =\n/** @class */\nfunction (_super) {\n  __extends(BaseExtension, _super);\n\n  function BaseExtension() {\n    var _this = _super.call(this, undefined) || this;\n\n    _this.isInitialized = false;\n    _this.utils = {\n      createPromiEvent: createPromiEvent,\n      isPromiEvent: isPromiEvent,\n      encodeJSON: encodeJSON,\n      decodeJSON: decodeJSON,\n      encodeQueryParameters: encodeQueryParameters,\n      decodeQueryParameters: decodeQueryParameters,\n      createJsonRpcRequestPayload: createJsonRpcRequestPayload,\n      standardizeJsonRpcRequestPayload: standardizeJsonRpcRequestPayload,\n      storage: storage\n    };\n    var sdkAccessFields = ['request', 'transport', 'overlay', 'sdk']; // Disallow SDK access before initialization.\n\n    return new Proxy(_this, {\n      get: function (target, prop, receiver) {\n        if (sdkAccessFields.includes(prop) && !_this.isInitialized) {\n          throw createExtensionNotInitializedError(prop);\n        }\n\n        return Reflect.get(target, prop, receiver);\n      }\n    });\n  }\n  /**\n   * Registers a Magic SDK instance with this Extension.\n   */\n\n\n  BaseExtension.prototype.init = function (sdk) {\n    if (this.isInitialized) return;\n    this.sdk = sdk;\n    this.isInitialized = true;\n  };\n  /**\n   * Creates a deprecation warning wrapped with a native Magic SDK warning type.\n   * Best practice is to warn users of upcoming deprecations at least one major\n   * version before the change is implemented. You can use this method to\n   * communicate deprecations in a manner consistent with Magic SDK core code.\n   */\n\n\n  BaseExtension.prototype.createDeprecationWarning = function (options) {\n    var method = options.method,\n        removalVersion = options.removalVersion,\n        useInstead = options.useInstead;\n    var useInsteadSuffix = useInstead ? \" Use `\" + useInstead + \"` instead.\" : '';\n    var message = \"`\" + method + \"` will be removed from this Extension in version `\" + removalVersion + \"`.\" + useInsteadSuffix;\n    return new MagicExtensionWarning(this, 'DEPRECATION_NOTICE', message);\n  };\n  /**\n   * Creates a warning wrapped with a native Magic SDK warning type. This\n   * maintains consistency in warning messaging for consumers of Magic SDK and\n   * this Extension.\n   */\n\n\n  BaseExtension.prototype.createWarning = function (code, message) {\n    return new MagicExtensionWarning(this, code, message);\n  };\n  /**\n   * Creates an error wrapped with a native Magic SDK error type. This maintains\n   * consistency in error handling for consumers of Magic SDK and this\n   * Extension.\n   */\n\n\n  BaseExtension.prototype.createError = function (code, message, data) {\n    return new MagicExtensionError(this, code, message, data);\n  };\n  /**\n   * Throws an error wrapped with a native Magic SDK error type. This maintains\n   * consistency in error handling for consumers of Magic SDK and this\n   * Extension.\n   */\n\n\n  BaseExtension.prototype.raiseError = function (code, message, data) {\n    throw new MagicExtensionError(this, code, message, data);\n  };\n\n  return BaseExtension;\n}(BaseModule);\n\nvar InternalExtension =\n/** @class */\nfunction (_super) {\n  __extends(InternalExtension, _super);\n\n  function InternalExtension() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return InternalExtension;\n}(BaseExtension);\n\nvar Extension =\n/** @class */\nfunction (_super) {\n  __extends(Extension, _super);\n\n  function Extension() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * This is a special constructor used to mark an extension as \"official.\" Only\n   * official extensions can interact with the iframe using custom JSON RPC\n   * methods and business logic. This is intended for internal-use only and\n   * provides no advantage to open-source extension developers.\n   *\n   * @internal\n   */\n\n\n  Extension.Internal = InternalExtension;\n  return Extension;\n}(BaseExtension);\n\nexport { Extension };","map":{"version":3,"sources":["../../../src/modules/base-extension.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createJsonRpcRequestPayload, standardizeJsonRpcRequestPayload } from '../core/json-rpc';\nimport { BaseModule } from './base-module';\nimport { createExtensionNotInitializedError, MagicExtensionError, MagicExtensionWarning } from '../core/sdk-exceptions';\nimport { createPromiEvent, encodeJSON, decodeJSON, encodeQueryParameters, decodeQueryParameters, storage, isPromiEvent, } from '../util';\nvar BaseExtension = /** @class */ (function (_super) {\n    __extends(BaseExtension, _super);\n    function BaseExtension() {\n        var _this = _super.call(this, undefined) || this;\n        _this.isInitialized = false;\n        _this.utils = {\n            createPromiEvent: createPromiEvent,\n            isPromiEvent: isPromiEvent,\n            encodeJSON: encodeJSON,\n            decodeJSON: decodeJSON,\n            encodeQueryParameters: encodeQueryParameters,\n            decodeQueryParameters: decodeQueryParameters,\n            createJsonRpcRequestPayload: createJsonRpcRequestPayload,\n            standardizeJsonRpcRequestPayload: standardizeJsonRpcRequestPayload,\n            storage: storage,\n        };\n        var sdkAccessFields = ['request', 'transport', 'overlay', 'sdk'];\n        // Disallow SDK access before initialization.\n        return new Proxy(_this, {\n            get: function (target, prop, receiver) {\n                if (sdkAccessFields.includes(prop) && !_this.isInitialized) {\n                    throw createExtensionNotInitializedError(prop);\n                }\n                return Reflect.get(target, prop, receiver);\n            },\n        });\n    }\n    /**\n     * Registers a Magic SDK instance with this Extension.\n     */\n    BaseExtension.prototype.init = function (sdk) {\n        if (this.isInitialized)\n            return;\n        this.sdk = sdk;\n        this.isInitialized = true;\n    };\n    /**\n     * Creates a deprecation warning wrapped with a native Magic SDK warning type.\n     * Best practice is to warn users of upcoming deprecations at least one major\n     * version before the change is implemented. You can use this method to\n     * communicate deprecations in a manner consistent with Magic SDK core code.\n     */\n    BaseExtension.prototype.createDeprecationWarning = function (options) {\n        var method = options.method, removalVersion = options.removalVersion, useInstead = options.useInstead;\n        var useInsteadSuffix = useInstead ? \" Use `\" + useInstead + \"` instead.\" : '';\n        var message = \"`\" + method + \"` will be removed from this Extension in version `\" + removalVersion + \"`.\" + useInsteadSuffix;\n        return new MagicExtensionWarning(this, 'DEPRECATION_NOTICE', message);\n    };\n    /**\n     * Creates a warning wrapped with a native Magic SDK warning type. This\n     * maintains consistency in warning messaging for consumers of Magic SDK and\n     * this Extension.\n     */\n    BaseExtension.prototype.createWarning = function (code, message) {\n        return new MagicExtensionWarning(this, code, message);\n    };\n    /**\n     * Creates an error wrapped with a native Magic SDK error type. This maintains\n     * consistency in error handling for consumers of Magic SDK and this\n     * Extension.\n     */\n    BaseExtension.prototype.createError = function (code, message, data) {\n        return new MagicExtensionError(this, code, message, data);\n    };\n    /**\n     * Throws an error wrapped with a native Magic SDK error type. This maintains\n     * consistency in error handling for consumers of Magic SDK and this\n     * Extension.\n     */\n    BaseExtension.prototype.raiseError = function (code, message, data) {\n        throw new MagicExtensionError(this, code, message, data);\n    };\n    return BaseExtension;\n}(BaseModule));\nvar InternalExtension = /** @class */ (function (_super) {\n    __extends(InternalExtension, _super);\n    function InternalExtension() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return InternalExtension;\n}(BaseExtension));\nvar Extension = /** @class */ (function (_super) {\n    __extends(Extension, _super);\n    function Extension() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * This is a special constructor used to mark an extension as \"official.\" Only\n     * official extensions can interact with the iframe using custom JSON RPC\n     * methods and business logic. This is intended for internal-use only and\n     * provides no advantage to open-source extension developers.\n     *\n     * @internal\n     */\n    Extension.Internal = InternalExtension;\n    return Extension;\n}(BaseExtension));\nexport { Extension };\n//# sourceMappingURL=base-extension.js.map"]},"metadata":{},"sourceType":"module"}