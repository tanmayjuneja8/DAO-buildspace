{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport { PayloadTransport } from '@magic-sdk/provider';\n\nvar WebTransport =\n/** @class */\nfunction (_super) {\n  __extends(WebTransport, _super);\n\n  function WebTransport() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * Initialize the underlying `Window.onmessage` event listener.\n   */\n\n\n  WebTransport.prototype.init = function () {\n    var _this = this;\n\n    window.addEventListener('message', function (event) {\n      var e_1, _a;\n\n      var _b;\n\n      if (event.origin === _this.endpoint) {\n        if (event.data && event.data.msgType && _this.messageHandlers.size) {\n          // If the response object is undefined, we ensure it's at least an\n          // empty object before passing to the event listener.\n\n          /* eslint-disable-next-line no-param-reassign */\n          event.data.response = (_b = event.data.response) !== null && _b !== void 0 ? _b : {};\n\n          try {\n            for (var _c = __values(_this.messageHandlers.values()), _d = _c.next(); !_d.done; _d = _c.next()) {\n              var handler = _d.value;\n              handler(event);\n            }\n          } catch (e_1_1) {\n            e_1 = {\n              error: e_1_1\n            };\n          } finally {\n            try {\n              if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            } finally {\n              if (e_1) throw e_1.error;\n            }\n          }\n        }\n      }\n    });\n  };\n\n  return WebTransport;\n}(PayloadTransport);\n\nexport { WebTransport };","map":{"version":3,"sources":["../../src/web-transport.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,gBAAT,QAAiC,qBAAjC;;AAEA,IAAA,YAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAAkC,EAAA,SAAA,CAAA,YAAA,EAAA,MAAA,CAAA;;AAAlC,WAAA,YAAA,GAAA;;AAmBC;AAlBC;;AAEG;;;AACO,EAAA,YAAA,CAAA,SAAA,CAAA,IAAA,GAAV,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,IAAA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,UAAC,KAAD,EAAoB;;;;;AACrD,UAAI,KAAK,CAAC,MAAN,KAAiB,KAAI,CAAC,QAA1B,EAAoC;AAClC,YAAI,KAAK,CAAC,IAAN,IAAc,KAAK,CAAC,IAAN,CAAW,OAAzB,IAAoC,KAAI,CAAC,eAAL,CAAqB,IAA7D,EAAmE;AACjE;AACA;;AACA;AACA,UAAA,KAAK,CAAC,IAAN,CAAW,QAAX,GAAmB,CAAA,EAAA,GAAG,KAAK,CAAC,IAAN,CAAW,QAAd,MAAsB,IAAtB,IAAsB,EAAA,KAAA,KAAA,CAAtB,GAAsB,EAAtB,GAA0B,EAA7C;;;AACA,iBAAsB,IAAA,EAAA,GAAA,QAAA,CAAA,KAAI,CAAC,eAAL,CAAqB,MAArB,EAAA,CAAA,EAA6B,EAAA,GAAA,EAAA,CAAA,IAAA,EAAnD,EAAmD,CAAA,EAAA,CAAA,IAAnD,EAAmD,EAAA,GAAA,EAAA,CAAA,IAAA,EAAnD,EAAqD;AAAhD,kBAAM,OAAO,GAAA,EAAA,CAAA,KAAb;AACH,cAAA,OAAO,CAAC,KAAD,CAAP;AACD;;;;;;;;;;;;AACF;AACF;AACF,KAZD;AAaD,GAdS;;AAeZ,SAAA,YAAA;AAAC,CAnBD,CAAkC,gBAAlC,CAAA","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { PayloadTransport } from '@magic-sdk/provider';\nvar WebTransport = /** @class */ (function (_super) {\n    __extends(WebTransport, _super);\n    function WebTransport() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Initialize the underlying `Window.onmessage` event listener.\n     */\n    WebTransport.prototype.init = function () {\n        var _this = this;\n        window.addEventListener('message', function (event) {\n            var e_1, _a;\n            var _b;\n            if (event.origin === _this.endpoint) {\n                if (event.data && event.data.msgType && _this.messageHandlers.size) {\n                    // If the response object is undefined, we ensure it's at least an\n                    // empty object before passing to the event listener.\n                    /* eslint-disable-next-line no-param-reassign */\n                    event.data.response = (_b = event.data.response) !== null && _b !== void 0 ? _b : {};\n                    try {\n                        for (var _c = __values(_this.messageHandlers.values()), _d = _c.next(); !_d.done; _d = _c.next()) {\n                            var handler = _d.value;\n                            handler(event);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n            }\n        });\n    };\n    return WebTransport;\n}(PayloadTransport));\nexport { WebTransport };\n//# sourceMappingURL=web-transport.js.map"]},"metadata":{},"sourceType":"module"}